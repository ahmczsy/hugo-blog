[{"categories":["linux"],"content":"ä»‹ç» è™½ç„¶æˆ‘ä¸ªäººæ˜¯è®¡ç®—æœºçš„ç§‘ç­æ¯•ä¸šç”Ÿï¼Œç”±äºåœ¨å­¦ä¹ æ“ä½œç³»ç»Ÿçš„è¯¾ç¨‹ä¸­å¹¶æ²¡æœ‰å¾ˆå¥½çš„ä»£ç å®è·µï¼Œä»¥è‡³äºåˆ°ç°åœ¨å·²ç»å®Œå…¨å¿˜è®°äº†æ“ä½œç³»ç»Ÿè¯¾ç¨‹åˆ°å†…å®¹ã€‚å†åŠ ä¸Šåœ¨èƒŒå„ç§â€œå…«è‚¡æ–‡â€çš„è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°å¾ˆå¤šçš„åº•å±‚çš„æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†ï¼Œæ‰€ä»¥æ‰“ç®—ç³»ç»Ÿçš„å­¦ä¹ ä¸‹ mit 6.S081 è¯¾ç¨‹ã€‚è¯¥è¯¾ç¨‹çš„é‡ç‚¹å°±æ˜¯è¯¾åçš„å®éªŒï¼ˆlabï¼‰ã€‚åœ¨åšå®éªŒä¹‹å‰éœ€è¦å‡†å¤‡ç¼–ç¨‹çš„ç¯å¢ƒï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« è®°å½•çš„å°±æ˜¯åœ¨ mac ä¸‹æ­å»º 6.S081 è¯¾ç¨‹çš„å‰ç½®ç¯å¢ƒã€‚ ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:1:0","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"ç¯å¢ƒæ­å»º MacOS ä¸‹éœ€è¦äº‹å…ˆå‡†å¤‡å¥½ xcode å’Œ homebrewï¼Œæˆ‘çš„ç³»ç»Ÿç‰ˆæœ¬æ˜¯11.5.2ã€‚ homebrew æ˜¯ mac çš„å¿…å¤‡è½¯ä»¶ï¼Œæ‰€ä»¥å®ƒçš„å®‰è£…è¿‡ç¨‹å°±çœç•¥äº† xcode å®‰è£…ï¼šxcode-select --install å®éªŒç¯å¢ƒä¸»è¦åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼š RISC-Vå·¥å…·é“¾ï¼š åŒ…æ‹¬ä¸€ç³»åˆ—äº¤å‰ç¼–è¯‘çš„å·¥å…·ï¼Œç”¨äºæŠŠæºç ç¼–è¯‘æˆæœºå™¨ç ï¼Œå¦‚gccï¼Œbinutilsï¼Œglibcç­‰ QEMUæ¨¡æ‹Ÿå™¨ï¼š ç”¨äºåœ¨æˆ‘ä»¬æœºå™¨ä¸Š(X86)æ¨¡æ‹ŸRISC-Væ¶æ„çš„CPU xv6æºç ï¼š xv6æ“ä½œç³»ç»Ÿæºç  ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:0","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"RISC-V toolchain $ brew tap riscv/riscv $ brew install riscv-tools ä¸Šé¢çš„å®‰è£…å¥½åæŠŠ riscv åŠ å…¥åˆ° mac çš„ç¯å¢ƒå˜é‡ä¸­ PATH=$PATH:/usr/local/opt/riscv-gnu-toolchain/bin ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:1","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"QEMU æ¨¡æ‹Ÿå™¨ å¦‚æœä½ ç›´æ¥æŒ‰ç…§å®˜æ–¹çš„æ–¹å¼ä½¿ç”¨ homebrew å®‰è£… qemuï¼Œå®‰è£…å¥½çš„ qemu ç‰ˆæœ¬è‚¯å®šå¤§äº 5.1ï¼Œè€Œ xv6 åœ¨é«˜ç‰ˆæœ¬çš„ qemu ä¸‹ç¼–è¯‘æœ‰ bug ã€‚æ‰€ä»¥æˆ‘ä»¬åªèƒ½æ‰‹åŠ¨çš„ä¸‹è½½æºç ï¼Œç¼–è¯‘ 5.1 ç‰ˆæœ¬çš„ qemu # å¸è½½é«˜ç‰ˆæœ¬ qemu brew uninstall qemu # åˆ é™¤ qemu çš„æ®‹ç•™ rm -rf /usr/local/bin/vdeqemu # ä¸‹è½½æºç  wget https://download.qemu.org/qemu-5.1.0-rc3.tar.xz tar xvf qemu-5.1.0-rc3.tar.xz cd qemu-5.1.0-rc3.tar.xz ./configure # ç¼–è¯‘ make \u0026\u0026 make install ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:2","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"vx6 ä¸‹è½½ xv6 æºç  git clone git://github.com/mit-pdos/xv6-riscv-fall19.git ç¼–è¯‘ make qemu é€€å‡º qemu æ¨¡æ‹Ÿå™¨çš„æ–¹æ³•ï¼šå…ˆæŒ‰ä½ ctrl å’Œ a æ¾å¼€åå†æŒ‰ä¸‹ x ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:3","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å‚è€ƒ https://pdos.csail.mit.edu/6.828/2020/tools.html https://zhayujie.com/mit6828-env.html ","date":"2021-09-07","objectID":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/:2:4","tags":["å…¬å¼€è¯¾"],"title":"Mac ä¸‹ 6.S081 çš„ç¯å¢ƒæ­å»º","uri":"/2021_9_7_mac-%E4%B8%8B-6.s081-%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"},{"categories":["linux"],"content":"å‰ç½®çŸ¥è¯† ","date":"2021-07-16","objectID":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/:1:0","tags":["linux"],"title":"linuxä¸­çš„socketå’Œpipleæ–‡ä»¶ç±»å‹","uri":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/"},{"categories":["linux"],"content":"$$ å’Œ $BASHPID çš„ç”¨å¤„å’ŒåŒºåˆ« $$ å’Œ $BASHPID éƒ½æ˜¯æ‰“å°å½“å‰ bash è¿›ç¨‹çš„è¿›ç¨‹ç¼–å·ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸¤è€…æ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œè¾“å‡ºç»“æœç›¸åŒ noel@noel:~$ echo $$ 2948 noel@noel:~$ echo $BASHPID 2948 ä½†æ˜¯åœ¨ä¸‹é¢çš„ä¾‹å­ä¸‹åˆä¸åŒ noel@noel:~$ { echo $$; read a;} | { cat; } 2948 noel@noel:~$ { echo $BASHPID; read a;} | { cat; } 3898 åœ¨ linux ä¸­ï¼Œç®¡é“(|)çš„ä¸¤ä¾§æ˜¯é€šè¿‡ä¸¤ä¸ªå­è¿›ç¨‹æ¥åˆ†åˆ«æ‰§è¡Œçš„ã€‚$$ åœ¨å“ªä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè¯¥å€¼å°±æ˜¯å“ªä¸ªè¿›ç¨‹çš„PIDã€‚$BASHPID å°±æ˜¯å½“å‰è¿›ç¨‹çš„ PID çœŸå®å€¼ï¼ˆå½“å‰æ‰§è¡Œçš„å‘½ä»¤çš„ PIDï¼‰ã€‚ ç”±äº { echo $BASHPID; read a;} | { cat; } å‘½ä»¤æ˜¯ç”±ä¸¤ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œï¼Œæ‰€ä»¥ echo $BASHPID æ‰“å°çš„æ˜¯å­è¿›ç¨‹çš„ pidã€‚ ","date":"2021-07-16","objectID":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/:1:1","tags":["linux"],"title":"linuxä¸­çš„socketå’Œpipleæ–‡ä»¶ç±»å‹","uri":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/"},{"categories":["linux"],"content":"socket æ–‡ä»¶ç±»å‹ å¯ä»¥ä½¿ç”¨ exec 8\u003c\u003e /dev/tcp/www.baidu.com/80 åœ¨å½“å‰ bash ä¸­æ‰“å¼€ä¸€ä¸ª socket æ–‡ä»¶ç±»å‹ å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼æ¥éªŒè¯ ","date":"2021-07-16","objectID":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/:2:0","tags":["linux"],"title":"linuxä¸­çš„socketå’Œpipleæ–‡ä»¶ç±»å‹","uri":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/"},{"categories":["linux"],"content":"pipe æ–‡ä»¶ç±»å‹ linux ä¸­çš„ç®¡é“æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œç®¡é“éƒ½æ˜¯ä¸€ç«¯å†™å…¥ã€å¦ä¸€ç«¯è¯»å–ï¼Œå®ƒä»¬æ˜¯å•æ–¹å‘æ•°æ®ä¼ è¾“çš„ï¼Œå®ƒä»¬çš„æ•°æ®éƒ½æ˜¯ç›´æ¥åœ¨å†…å­˜ä¸­ä¼ è¾“çš„ã€‚ç®¡é“ä¹Ÿæ˜¯ linux å…¶ä¸­ä¸€ç§æ–‡ä»¶ç±»å‹ã€‚ ä¸‹é¢æ¼”ç¤ºä¸‹å¦‚ä½•è§‚å¯Ÿ linux ä¸‹çš„ pipe æ–‡ä»¶ç±»å‹ æŸ¥è¯¢ä¸‹å½“å‰çš„ bash çš„ pid noel@noel:~$ echo $$ 2948 æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œä¼šé˜»å¡ä½ noel@noel:~$ { echo $BASHPID; read a; } | { cat ; echo $BASHPID; read y; } 6142 æ–°å¼€ä¸€ä¸ª bash ç„¶åé€šè¿‡ pstree å‘½ä»¤æŸ¥çœ‹ä¹‹å‰ bash çš„è¿›ç¨‹æ ‘ noel@noel:~$ pstree -p 2948 bash(2948)â”€â”¬â”€bash(6142) â””â”€bash(6143)â”€â”€â”€cat(6144) å¯ä»¥çœ‹åˆ° 2948 æœ‰ä¸¤ä¸ªå­è¿›ç¨‹ï¼Œåˆ†åˆ«æ˜¯ 6142 å’Œ 6143ã€‚æˆ‘ä»¬é€šè¿‡ lsof æ¥è§‚å¯Ÿä¸‹ ä¸Šé¢çš„å‘½ä»¤å¯ä»¥çœ‹å‡º 6142 è¿›ç¨‹ä¸‹æœ‰ä¸€ä¸ªå†™å…¥çš„ pipe ï¼Œ6143 è¿›ç¨‹ä¸‹æœ‰ä¸ªè¯»å–çš„ pipe é€šè¿‡ /prod/$pid/fd ä¸‹çš„æ–‡ä»¶ä¹Ÿå¯ä»¥æŸ¥çœ‹ ","date":"2021-07-16","objectID":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/:3:0","tags":["linux"],"title":"linuxä¸­çš„socketå’Œpipleæ–‡ä»¶ç±»å‹","uri":"/2021.07.16_linux%E4%B8%AD%E7%9A%84socket%E5%92%8Cpiple%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B/"},{"categories":["linux"],"content":"åœ¨ linux ä¸­æ‰‹åŠ¨çš„ä½“éªŒ overlay2 ä»€ä¹ˆæ˜¯UnionFS è”åˆæ–‡ä»¶ç³»ç»Ÿï¼ˆUnion File Systemï¼‰å¯ä»¥æŠŠå¤šä¸ªç›®å½•(ä¹Ÿå«åˆ†æ”¯)å†…å®¹è”åˆæŒ‚è½½åˆ°åŒä¸€ä¸ªç›®å½•ä¸‹ï¼Œè€Œç›®å½•çš„ç‰©ç†ä½ç½®æ˜¯åˆ†å¼€çš„ã€‚linux ä¸­ UnionFS çš„å®ç°æœ‰å¾ˆå¤šï¼Œdocker ç›®å‰ç”¨çš„æ˜¯ overlay2 ä¸Šé¢è¿™å¼ å›¾å°±æ˜¯è”åˆæ–‡ä»¶ç³»ç»Ÿçš„ä¸€ä¸ªç¤ºä¾‹ï¼šæŠŠ lower1ï¼Œlower2ï¼Œupper ä¸‰ä¸ªæ–‡ä»¶çš„å†…å®¹è”åˆæŒ‚è½½åˆ° merge æ–‡ä»¶å¤¹ã€‚è¦æƒ³çŸ¥é“overlay2æ˜¯å¦‚ä½•æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶å¤¹åˆå¹¶çš„ï¼Œè¦å…ˆç†è§£lowerdir,upperdir,work,merged è¿™å››ç§æ–‡ä»¶å¤¹ lowerdir ï¼šè¡¨ç¤ºè¾ƒä¸ºåº•å±‚çš„ç›®å½•ï¼Œä¿®æ”¹è”åˆæŒ‚è½½ç‚¹ä¸ä¼šå½±å“åˆ°lowerdirã€‚å°±æ˜¯ä¸Šå›¾ä¸­çš„ lower1 ï¼Œlower2 æ–‡ä»¶å¤¹ upperdirï¼šè¡¨ç¤ºè¾ƒä¸ºä¸Šå±‚çš„ç›®å½•ï¼Œä¿®æ”¹è”åˆæŒ‚è½½ç‚¹ä¼šåœ¨upperdiråŒæ­¥ä¿®æ”¹ã€‚å°±æ˜¯ä¸Šå›¾ä¸­çš„ upper æ–‡ä»¶å¤¹ mergedï¼šæ˜¯ lowerdir å’Œ upperdir åˆå¹¶åçš„è”åˆæŒ‚è½½ç‚¹ã€‚å°±æ˜¯ä¸Šå›¾ä¸­è“è‰²çš„ merge æ–‡ä»¶å¤¹ workdirï¼šç”¨æ¥å­˜æ”¾æŒ‚è½½åçš„ä¸´æ—¶æ–‡ä»¶ä¸é—´æ¥æ–‡ä»¶ã€‚ æ‰‹åŠ¨çš„æŒ‚è½½ overlay2 é¦–å…ˆä¸‹é¢çš„å‘½ä»¤ä¼šåˆ›å»ºè¿™å››ç§ç›®å½•ï¼Œå¹¶åœ¨è¿™æ–‡ä»¶ä¸­åˆ›å»ºäº†ä¸€äº›æ–‡ä»¶ï¼Œç”¨æ¥è§‚å¯Ÿ overlay æ˜¯å¦‚ä½•è”åˆæŒ‚è½½çš„ mkdir overlay-test cd overlay-test mkdir low1 mkdir low2 mkdir up mkdir merge mkdir work touch low1/a echo \"a in low1\" \u003e low1/a touch low1/b touch low2/a echo \"a in low2\" \u003e low2/a touch low2/c touch up/d è¿è¡Œåçš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·çš„ ç„¶åæ‰§è¡Œ overlay çš„æŒ‚è½½å‘½ä»¤ sudo mount -t overlay overlay -o lowerdir=low1:low2,upperdir=up,workdir=work merge æ‰§è¡Œåçš„ç›®å½•ç»“æ„ï¼š ä»ä¸Šå›¾çœ‹å‡º merge æ–‡ä»¶å¤¹å·²ç»æœ‰äº† low1ï¼Œlow2ï¼Œup ä¸‰ä¸ªæ–‡ä»¶å¤¹çš„æ–‡ä»¶ ç”±äº low1 å’Œ low2 éƒ½æœ‰ a æ–‡ä»¶ï¼Œæ‰€ä»¥éœ€è¦çœ‹ä¸‹ merge é‡Œçš„ a æ–‡ä»¶æ¥è‡ªäºå“ªä¸ªæ–‡ä»¶å¤¹ root@noel:~/overlay-test# cat merge/a a in low1 ç”±äºä¸Šé¢çš„å‘½åä¸­ lowerdir æ–‡ä»¶å¤¹æŒ‚è½½äº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæŒ‚è½½äº†å¤šä¸ªæ–‡ä»¶ï¼Œå·¦é¢çš„ä¼˜å…ˆçº§é«˜ã€‚æ‰€ä»¥ a æ–‡ä»¶æ¥è‡ªäº low1 æ–‡ä»¶å¤¹ ä¿®æ”¹ merge åçš„æ–‡ä»¶ åœ¨ merge æ–‡ä»¶å¤¹æ–°å¢ new_file ï¼Œåœ¨ up æ–‡ä»¶å¤¹ä¹Ÿæ–°å¢äº†æ”¹æ–‡ä»¶ root@noel:~/overlay-test# touch merge/new_file root@noel:~/overlay-test# tree . â”œâ”€â”€ low1 â”‚Â â”œâ”€â”€ a â”‚Â â””â”€â”€ b â”œâ”€â”€ low2 â”‚Â â”œâ”€â”€ a â”‚Â â””â”€â”€ c â”œâ”€â”€ merge â”‚Â â”œâ”€â”€ a â”‚Â â”œâ”€â”€ b â”‚Â â”œâ”€â”€ c â”‚Â â”œâ”€â”€ d â”‚Â â””â”€â”€ new_file â”œâ”€â”€ up â”‚Â â”œâ”€â”€ d â”‚Â â””â”€â”€ new_file â””â”€â”€ work â””â”€â”€ work 6 directories, 12 files ä¿®æ”¹ merge ä¸‹çš„ b æ–‡ä»¶ï¼Œlow1 æ–‡ä»¶å¤¹å†…çš„ b æ–‡ä»¶æ²¡æœ‰æ”¹å˜ root@noel:~/overlay-test# echo \"bbbb\" \u003emerge/b root@noel:~/overlay-test# cat merge/b bbbb root@noel:~/overlay-test# cat low1/b root@noel:~/overlay-test# ä¿®æ”¹ merge ä¸‹çš„ d æ–‡ä»¶ï¼Œup æ–‡ä»¶å¤¹å†…çš„ d æ–‡ä»¶éšä¹‹æ”¹å˜ root@noel:~/overlay-test# echo \"ddddd\" \u003e merge/d root@noel:~/overlay-test# cat merge/d ddddd root@noel:~/overlay-test# cat up/d ddddd root@noel:~/overlay-test# æ€»ç»“ ä»ä¸Šé¢çš„ä¸€äº›ç°è±¡æ¥çœ‹ï¼Œlowerdir å°±åƒæ˜¯ docker ä¸­çš„ imageï¼Œlow1 å’Œ low2 å°±æ˜¯ image ä¸­ layer çš„æ¦‚å¿µã€‚upperdir å°±æ˜¯ docker ä¸­çš„ containerã€‚ ä¸‹å›¾å°±æ˜¯ dcoker å®˜ç½‘ä¸­çš„ä¸€ä¸ªå›¾ç‰‡ ","date":"2021-02-26","objectID":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/:1:0","tags":["docker"],"title":"docker ä¸­çš„ overlay å­˜å‚¨åŸç†","uri":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/"},{"categories":["linux"],"content":"docker ä¸­çš„ overlay ","date":"2021-02-26","objectID":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/:2:0","tags":["docker"],"title":"docker ä¸­çš„ overlay å­˜å‚¨åŸç†","uri":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/"},{"categories":["linux"],"content":"ä¸‹è½½ image ä½¿ç”¨docker pull ubuntu æ¥ä¸‹è½½ image æ¥ç ”ç©¶ root@noel:~# docker pull ubuntu Using default tag: latest latest: Pulling from library/ubuntu 83ee3a23efb7: Pull complete db98fc6f11f0: Pull complete f611acd52c6c: Pull complete Digest: sha256:703218c0465075f4425e58fac086e09e1de5c340b12976ab9eb8ad26615c3715 Status: Downloaded newer image for ubuntu:latest docker.io/library/ubuntu:latest root@noel:~# ä¸Šé¢å‘½ä»¤å¯ä»¥çœ‹å‡ºæˆ‘ä»¬ä¸‹è½½äº†çš„ ubuntu é•œåƒæœ‰ä¸‰å±‚ï¼Œé‚£ä¸Šé¢çš„ä¾‹å­æ¥å¯¹æ¯”å°±æ˜¯æœ‰ low1ï¼Œlow2ï¼Œlow3 ä¸‰ä¸ªæ–‡ä»¶å¤¹ ","date":"2021-02-26","objectID":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/:2:1","tags":["docker"],"title":"docker ä¸­çš„ overlay å­˜å‚¨åŸç†","uri":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/"},{"categories":["linux"],"content":"è§‚å¯Ÿ image å’Œ container çš„æ–‡ä»¶ç»“æ„ image docker ä¸‹è½½çš„é•œåƒéƒ½åœ¨ /var/lib/docker/overlay2 è¿›å…¥è¯¥ç›®å½•åçœ‹ä¸‹ç›®å½•ç»“æ„ root@noel:/var/lib/docker/overlay2# tree -L 2 . â”œâ”€â”€ 18533d22086c0f91c14a11499d506f53452c92a0179ce20de5d8de21b084b05c â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â””â”€â”€ link â”œâ”€â”€ 78e6965c4bca0f7a6da0d72a1dc361933e9635ceec89519625b03bd4253d73b9 â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â””â”€â”€ work â”œâ”€â”€ 7979e6ce4b2f7675255db2aec3d01a1f545425652952802cae4e42b8e8d56d78 â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â””â”€â”€ work â””â”€â”€ l â”œâ”€â”€ 6CZZH722UFGUBASNSUFY24SAVT -\u003e ../18533d22086c0f91c14a11499d506f53452c92a0179ce20de5d8de21b084b05c/diff â”œâ”€â”€ PJGLJKKB3IET6REXBDXWWZPJPB -\u003e ../7979e6ce4b2f7675255db2aec3d01a1f545425652952802cae4e42b8e8d56d78/diff â””â”€â”€ UFLIZTAI4O6KBT4XSDYLFFRVIQ -\u003e ../78e6965c4bca0f7a6da0d72a1dc361933e9635ceec89519625b03bd4253d73b9/diff diff ï¼šæ–‡ä»¶å®é™…å­˜æ”¾ä½ç½® lowerï¼šå­˜å‚¨çš„æ˜¯çˆ¶ layer çš„ idï¼Œå¦‚æœæ²¡æœ‰è¯¥æ–‡ä»¶ï¼Œè¯´æ˜è¯¥ layer æ˜¯æ ¹èŠ‚ç‚¹ linkï¼šå­˜å‚¨çš„æ˜¯è¯¥æ–‡ä»¶å¤¹çš„ çŸ­id å’Œ l æ–‡ä»¶å¤¹å†…çš„è½¯è¿æ¥ç›¸ç¬¦ container docker run -it ubuntu å¯åŠ¨å®¹å™¨åå†è§‚å¯Ÿæ–‡ä»¶çš„å˜åŒ– root@noel:/var/lib/docker/overlay2# tree -L 2 . â”œâ”€â”€ 18533d22086c0f91c14a11499d506f53452c92a0179ce20de5d8de21b084b05c â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â””â”€â”€ link â”œâ”€â”€ 78e6965c4bca0f7a6da0d72a1dc361933e9635ceec89519625b03bd4253d73b9 â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â””â”€â”€ work â”œâ”€â”€ 7979e6ce4b2f7675255db2aec3d01a1f545425652952802cae4e42b8e8d56d78 â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â””â”€â”€ work â”œâ”€â”€ bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68 â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â”œâ”€â”€ merged â”‚Â â””â”€â”€ work â”œâ”€â”€ bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68-init â”‚Â â”œâ”€â”€ committed â”‚Â â”œâ”€â”€ diff â”‚Â â”œâ”€â”€ link â”‚Â â”œâ”€â”€ lower â”‚Â â””â”€â”€ work â””â”€â”€ l â”œâ”€â”€ 6CZZH722UFGUBASNSUFY24SAVT -\u003e ../18533d22086c0f91c14a11499d506f53452c92a0179ce20de5d8de21b084b05c/diff â”œâ”€â”€ PJGLJKKB3IET6REXBDXWWZPJPB -\u003e ../7979e6ce4b2f7675255db2aec3d01a1f545425652952802cae4e42b8e8d56d78/diff â”œâ”€â”€ SIVTPIQFVUBGEQPAQABNZKAO4Q -\u003e ../bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/diff â”œâ”€â”€ UFLIZTAI4O6KBT4XSDYLFFRVIQ -\u003e ../78e6965c4bca0f7a6da0d72a1dc361933e9635ceec89519625b03bd4253d73b9/diff â””â”€â”€ XWLNFDN6UKH5MVFD32HLGEH57U -\u003e ../bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68-init/diff å¯ä»¥å‘ç°å¤šäº†ä¸¤ä¸ªæ–‡ä»¶å¤¹ bd9fd7613.....8f54e68 å’Œ bd9fd7613.....8f54e68-init bd9fd7613.....8f54e68 å°±æ˜¯ container çš„å·¥ä½œç›®å½• init ä¸ºç»“å°¾çš„æ–‡ä»¶å¤¹å±äº lowerdir å±‚ã€‚init å±‚æ˜¯ docker é¡¹ç›®å•ç‹¬ç”Ÿæˆçš„ä¸€ä¸ªå†…éƒ¨å±‚ï¼Œä¸“é—¨ç”¨æ¥å­˜æ”¾ /etc/hostsã€/etc/resolv.conf ç­‰ä¿¡æ¯ã€‚éœ€è¦è¿™æ ·ä¸€å±‚çš„åŸå› æ˜¯ï¼Œè¿™äº›æ–‡ä»¶æœ¬æ¥å±äºåªè¯»çš„ç³»ç»Ÿé•œåƒå±‚çš„ä¸€éƒ¨åˆ†ï¼Œä½†æ˜¯ç”¨æˆ·å¾€å¾€éœ€è¦åœ¨å¯åŠ¨å®¹å™¨æ—¶å†™å…¥ä¸€äº›æŒ‡å®šçš„å€¼æ¯”å¦‚hostnameï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨å¯è¯»å†™å±‚å¯¹å®ƒä»¬è¿›è¡Œä¿®æ”¹ã€‚å¯æ˜¯ï¼Œè¿™äº›ä¿®æ”¹å¾€å¾€åªå¯¹å½“å‰çš„å®¹å™¨æœ‰æ•ˆï¼Œæˆ‘ä»¬å¹¶ä¸å¸Œæœ›æ‰§è¡Œ docker commit æ—¶ï¼ŒæŠŠè¿™äº›ä¿¡æ¯è¿åŒå¯è¯»å†™å±‚ä¸€èµ·æäº¤æ‰ã€‚æ‰€ä»¥ï¼Œdocker åšæ³•æ˜¯ï¼Œåœ¨ä¿®æ”¹äº†è¿™äº›æ–‡ä»¶ä¹‹åï¼Œä»¥ä¸€ä¸ªå•ç‹¬çš„å±‚æŒ‚è½½äº†å‡ºæ¥ã€‚è€Œç”¨æˆ·æ‰§è¡Œ docker commit åªä¼šæäº¤å¯è¯»å†™å±‚ï¼Œæ‰€ä»¥æ˜¯ä¸åŒ…å«è¿™äº›å†…å®¹çš„ã€‚ è¿™æ—¶è¿è¡Œ mount | grep docker æŸ¥çœ‹ç³»ç»Ÿç›®å‰æŒ‚è½½äº†ä»€ä¹ˆæ–‡ä»¶ overlay on /var/lib/docker/overlay2/bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/merged type overlay ( rw,relatime, lowerdir= /var/lib/docker/overlay2/l/XWLNFDN6UKH5MVFD32HLGEH57U: /var/lib/docker/overlay2/l/UFLIZTAI4O6KBT4XSDYLFFRVIQ: /var/lib/docker/overlay2/l/PJGLJKKB3IET6REXBDXWWZPJPB: /var/lib/docker/overlay2/l/6CZZH722UFGUBASNSUFY24SAVT, upperdir=/var/lib/docker/overlay2/bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/diff, workdir=/var/lib/docker/overlay2/bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/work ) å¯ä»¥çœ‹åˆ° upperdir åœ¨ bd9fd7613.....8f54e68/diff ç›®å½• åœ¨å®¹å™¨å†…ä½¿ç”¨ touch inner_container.txt æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œçœ‹çœ‹è¯¥æ–‡ä»¶åœ¨æ–‡ä»¶åœ¨å®¿ä¸»æœºçš„å“ªä¸ªæ–‡ä»¶å¤¹ä¸‹ root@noel:/var/lib/docker/overlay2# find ./ -name inner_container.txt ./bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/diff/inner_container.txt ./bd9fd7613eb3a36398b0c9929740c7393c1e8e97208486a4d5e9b54658f54e68/merged/inner_container.txt å¯ä»¥çœ‹åˆ°åœ¨å®¹å™¨å†…æ–°å¢äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œåªä¼šåœ¨å®¿ä¸»æœºçš„ upperdir å’Œ merged åšå‡ºä¿®æ”¹ ","date":"2021-02-26","objectID":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/:2:2","tags":["docker"],"title":"docker ä¸­çš„ overlay å­˜å‚¨åŸç†","uri":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/"},{"categories":["linux"],"content":"å‚è€ƒ https://zhuanlan.zhihu.com/p/95590072ã€ https://blog.csdn.net/luckyapple1028/article/details/78075358 https://staight.github.io/2019/10/04/%E5%AE%B9%E5%99%A8%E5%AE%9E%E7%8E%B0-overlay2/ https://docs.docker.com/storage/storagedriver/overlayfs-driver/#how-the-overlay-driver-works ","date":"2021-02-26","objectID":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/:3:0","tags":["docker"],"title":"docker ä¸­çš„ overlay å­˜å‚¨åŸç†","uri":"/2021.02.26_docker-%E4%B8%AD%E7%9A%84overlay-%E5%AD%98%E5%82%A8%E5%8E%9F%E7%90%86/"},{"categories":["db"],"content":"é—®é¢˜ ä»Šå¤©å¶ç„¶å‘ç° mysql åœ¨æ¯”è¾ƒå­—ç¬¦æ—¶ä¼šå¿½ç•¥å¤§å°å†™ï¼Œè¿™è®©æˆ‘éå¸¸æ„å¤–ã€‚ æ¯”å¦‚ select 'a' = 'A' è¿™è¡Œè¿è¡Œçš„ç»“æœæ˜¯ 1ä¹Ÿå°±æ˜¯åœ¨ mysql çœ‹æ¥ a å’Œ A æ˜¯ç›¸ç­‰çš„ ç»è¿‡ä¸€ç•ªçš„æŸ¥æ‰¾åŸæ¥æ˜¯ mysql çš„ collate å±æ€§é€ æˆçš„ ","date":"2021-02-20","objectID":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/:1:0","tags":["mysql"],"title":"mysql å¦‚ä½•æŸ¥çœ‹ï¼Œä¿®æ”¹ collate","uri":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/"},{"categories":["db"],"content":"collate æˆ‘ä»¬åœ¨åˆ›å»ºæ•°æ®åº“æ˜¯ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥ create database \u003cname\u003e å¦‚æœéœ€è¦ä½¿ç”¨ utf8 å­—ç¬¦é›†ä¼šåœ¨åé¢æŒ‡å®š database çš„å­—ç¬¦é›†create database \u003cname\u003e character set utf8mb4 ä½†é™¤äº†charset å±æ€§è¿˜æœ‰collate å±æ€§æ˜¯å¯ä»¥è®¾ç½®ï¼ˆå¦‚ä¸‹ï¼‰ï¼Œcollate å°±æ˜¯å’Œå¤§å°å†™æ•æ„Ÿæœ‰å…³ CREATE DATABASE \u003cname\u003e CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci; collate çš„ä½œç”¨ å¯¹äºmysqlä¸­é‚£äº›å­—ç¬¦ç±»å‹çš„åˆ—ï¼Œå¦‚VARCHARï¼ŒCHARï¼ŒTEXTç±»å‹çš„åˆ—ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªCOLLATEç±»å‹æ¥å‘ŠçŸ¥mysqlå¦‚ä½•å¯¹è¯¥åˆ—è¿›è¡Œæ’åºå’Œæ¯”è¾ƒã€‚ç®€è€Œè¨€ä¹‹ï¼ŒCOLLATEä¼šå½±å“åˆ°ORDER BYè¯­å¥çš„é¡ºåºï¼Œä¼šå½±å“åˆ°WHEREæ¡ä»¶ä¸­å¤§äºå°äºå·ç­›é€‰å‡ºæ¥çš„ç»“æœï¼Œä¼šå½±å“DISTINCTã€GROUP BYã€HAVINGè¯­å¥çš„æŸ¥è¯¢ç»“æœã€‚å¦å¤–ï¼Œmysqlå»ºç´¢å¼•çš„æ—¶å€™ï¼Œå¦‚æœç´¢å¼•åˆ—æ˜¯å­—ç¬¦ç±»å‹ï¼Œä¹Ÿä¼šå½±å“ç´¢å¼•åˆ›å»ºï¼Œåªä¸è¿‡è¿™ç§å½±å“æˆ‘ä»¬æ„ŸçŸ¥ä¸åˆ°ã€‚æ€»ä¹‹ï¼Œå‡¡æ˜¯æ¶‰åŠåˆ°å­—ç¬¦ç±»å‹æ¯”è¾ƒæˆ–æ’åºçš„åœ°æ–¹ï¼Œéƒ½ä¼šå’ŒCOLLATEæœ‰å…³ã€‚ collate çš„åç¼€ collate æœ‰ä¸‰ç§åç¼€ _ci ï¼š case insensitive çš„ç¼©å†™ï¼Œå³å¤§å°å†™æ— å…³ã€‚ä¾‹å¦‚ï¼šutf8mb4_general_ci _cs ï¼š case sensitive çš„ç¼©å†™ ï¼Œå³å¤§å°å†™æœ‰å…³ _bin ï¼šæŠŠå­—ç¬¦çœ‹ä½œäºŒè¿›åˆ¶ä¸²ï¼Œç„¶åä»æœ€é«˜ä½å¾€æœ€ä½ä½æ¯”å¯¹ã€‚æ‰€ä»¥å¾ˆæ˜¾ç„¶å®ƒæ˜¯åŒºåˆ†å¤§å°å†™çš„ã€‚ä¾‹å¦‚ utf8mb4_bin å…¶ä»– åœ¨ mysql 5.7 ä¸­ utf8 ç¼–ç çš„é»˜è®¤ collate æ˜¯ utf8mb4_general_ci show collation å¯ä»¥æŸ¥çœ‹ mysql æ‰€æœ‰æ”¯æŒçš„ collate ","date":"2021-02-20","objectID":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/:2:0","tags":["mysql"],"title":"mysql å¦‚ä½•æŸ¥çœ‹ï¼Œä¿®æ”¹ collate","uri":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/"},{"categories":["db"],"content":"æŸ¥çœ‹ collate ä»ä¸Šé¢çš„ä¿¡æ¯ å¾—å‡ºcollate æ˜¯å½±å“æŸ¥è¯¢å¤§å°å†™æ•æ„Ÿçš„å…³é”®ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥è‚¯å®šæ˜¯æƒ³è¦çœ‹çœ‹ç›®å‰çš„æ•°æ®åº“ï¼Œè¡¨çš„ collate å€¼æ˜¯ä»€ä¹ˆï¼Œæ˜¯ä¸æ˜¯ä»¥ _ci ç»“å°¾ æŸ¥è¯¢ database çš„ collate SELECT SCHEMA_NAME 'database', DEFAULT_CHARACTER_SET_NAME 'charset', DEFAULT_COLLATION_NAME 'collation' FROM information_schema.SCHEMATA where SCHEMA_NAME = 'collate_test_db'; ç»“æœï¼š +-----------------+---------+--------------------+ | database | charset | collation | +-----------------+---------+--------------------+ | collate_test_db | utf8mb4 | utf8mb4_general_ci | +-----------------+---------+--------------------+ æŸ¥è¯¢è¡¨çš„ collate select TABLE_SCHEMA, TABLE_COLLATION from information_schema.TABLES where TABLE_NAME = 'collate_test_table' ç»“æœï¼š +-----------------+--------------------+ | TABLE_SCHEMA | TABLE_COLLATION | +-----------------+--------------------+ | collate_test_db | utf8mb4_general_ci | +-----------------+--------------------+ æŸ¥è¯¢åˆ—çš„ collate SHOW FULL COLUMNS FROM \u003ctable_name\u003e; ","date":"2021-02-20","objectID":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/:3:0","tags":["mysql"],"title":"mysql å¦‚ä½•æŸ¥çœ‹ï¼Œä¿®æ”¹ collate","uri":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/"},{"categories":["db"],"content":"ä¿®æ”¹ collate ä»ä¸Šé¢çœ‹å‡ºçš„æ•°æ®åº“å’Œè¡¨éƒ½æ˜¯ _ci åç¼€çš„ï¼Œæ‰€ä»¥ä¸‹é¢å°±æ˜¯æŠŠåç¼€æ”¹ä¸º _bin database å±‚çº§çš„ä¿®æ”¹ ALTER DATABASE collate_test_db DEFAULT CHARACTER SET utf8mb4 COLLATE = utf8mb4_bin; è¿™åªæ˜¯ä¿®æ”¹äº† database çš„é»˜è®¤ collate ï¼Œä¸ä¼šå¯¹å·²ç»å­˜åœ¨çš„è¡¨è¿›è¡Œä¿®æ”¹ table å±‚çº§çš„ä¿®æ”¹ âš ï¸ æ³¨æ„ä¸‹é¢æœ‰ä¸¤ä¸ª sql ï¼šç¬¬ä¸€ä¸ª sql åªä¼šä¿®æ”¹ table çš„é»˜è®¤ collate ï¼Œä¸ä¼šä¿®æ”¹å·²ç»å­˜åœ¨å­—æ®µçš„ collate ã€‚ç¬¬äºŒä¸ª sql ä¸ä½†ä¼šä¿®æ”¹é»˜è®¤çš„ collate ï¼Œè¿˜ä¼šä¿®æ”¹å·²å­˜åœ¨çš„å­—æ®µã€‚æ‰€ä»¥æ¨èä½¿ç”¨ç¬¬äºŒä¸ª sql ALTER TABLE collate_test_table CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; ALTER TABLE collate_test_table CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; æ‰¹é‡ç”Ÿæˆä¿®æ”¹ collate çš„sql å¦‚æœä¸€ä¸ª database å†…çš„ table è¿‡å¤šï¼Œä¸€ä¸ªä¸ªå†™ alter sql å¤ªéº»çƒ¦äº†ï¼Œå¯ä»¥æ‰¹é‡ç”Ÿæˆ SELECT CONCAT('ALTER TABLE `', TABLE_NAME, '` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin;') AS target_tables FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'collate_test_db' AND TABLE_TYPE = 'BASE TABLE' ç»“æœï¼š +------------------------------------------------------------------------------------------+ | target_tables | +------------------------------------------------------------------------------------------+ | ALTER TABLE `collate_test_table` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; | | ALTER TABLE `collate_test_table_1` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; | | ALTER TABLE `collate_test_table_2` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; | | ALTER TABLE `collate_test_table_3` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; | | ALTER TABLE `collate_test_table_4` CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_bin; | +------------------------------------------------------------------------------------------+ ","date":"2021-02-20","objectID":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/:4:0","tags":["mysql"],"title":"mysql å¦‚ä½•æŸ¥çœ‹ï¼Œä¿®æ”¹ collate","uri":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/"},{"categories":["db"],"content":"å‚è€ƒ https://stackoverflow.com/questions/6115612/how-to-convert-an-entire-mysql-database-characterset-and-collation-to-utf-8 https://blog.csdn.net/ghosind/article/details/83692869 https://cloud.tencent.com/developer/article/1366841 ","date":"2021-02-20","objectID":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/:5:0","tags":["mysql"],"title":"mysql å¦‚ä½•æŸ¥çœ‹ï¼Œä¿®æ”¹ collate","uri":"/2021_02_20_mysql-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E4%BF%AE%E6%94%B9-collate/"},{"categories":["db"],"content":"å‰è¨€ ä»Šå¤©æœ‰ä¸ªä¸šåŠ¡æ˜¯éœ€è¦åœ¨æŸä¸ªè¡¨ä¸­æ–°å¢ä¸€åˆ—ã€‚æ–°å¢çš„åˆ—æ˜¯ä¸ªå­—å…¸åˆ—ï¼Œå€¼çš„ç§ç±»å¾ˆå°‘ã€‚ä¸€å¼€å§‹æˆ‘æƒ³è¦ä½¿ç”¨ LowCardinality(String) æ¥å­˜å‚¨ï¼Œä½†æœ‰ä¸ªåŒäº‹è¯´ç”¨uInt32 æ¥å­˜å‚¨ã€‚æˆ‘çš„ç†ç”±æ˜¯çœ‹ç€ç›´è§‚ï¼Œä¸ç”¨ç»´æŠ¤ int çš„æ˜ å°„å…³ç³»ï¼Œä»–çš„ç†ç”±æ˜¯å­˜å‚¨å’ŒæŸ¥è¯¢çš„æ•ˆç‡é«˜ã€‚ä½†æ˜¯æˆ‘ä»clickhouse çš„å®˜æ–¹æ–‡æ¡£ä¸­çœ‹åˆ°ï¼š The efficiency of using LowCardinality data type depends on data diversity. If a dictionary contains less than 10,000 distinct values, then ClickHouse mostly shows higher efficiency of data reading and storing. If a dictionary contains more than 100,000 distinct values, then ClickHouse can perform worse in comparison with using ordinary data types. æ–‡æ¡£è¯´æ•°æ®çš„ç§ç±»åœ¨åä¸‡ä»¥ä¸‹æ—¶ï¼Œæ•ˆç‡å¾ˆé«˜ï¼Œä½†ä¸çŸ¥é“æœ‰å¤šé«˜ã€‚äºæ˜¯æˆ‘æ‰“ç®— benchmark æµ‹è¯•ä¸‹ LowCardinality(String) å’Œ uInt32 çš„æ€§èƒ½å·®å¤šå°‘ã€‚ ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:1:0","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"æ•°æ®å‡†å¤‡ ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:2:0","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"å»ºè¡¨è¯­å¥ CREATE TABLE Dict ( id UInt32, int_dic UInt32, str_dic LowCardinality(String) ) ENGINE = MergeTree() ORDER BY (id) ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:2:1","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"äº§ç”Ÿæ•°æ® INSERT INTO Dict SELECT number AS id, [1, 2, 3, 4, 5, 6,7,8,9,10][rand() % 10 + 1] AS int_dic, ['one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten'][rand() % 10 + 1] AS str_dic FROM numbers(10000000) ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:2:2","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"æµ‹è¯•ç»“æœ group æŸ¥è¯¢ int ç±»å‹ SELECT int_dic, count() FROM Dict GROUP BY int_dic â”Œâ”€int_dicâ”€â”¬â”€count()â”€â” â”‚ 4 â”‚ 999772 â”‚ â”‚ 3 â”‚ 999515 â”‚ â”‚ 2 â”‚ 999412 â”‚ â”‚ 5 â”‚ 1000329 â”‚ â”‚ 1 â”‚ 1000159 â”‚ â”‚ 6 â”‚ 1000936 â”‚ â”‚ 7 â”‚ 999680 â”‚ â”‚ 9 â”‚ 1000776 â”‚ â”‚ 8 â”‚ 999922 â”‚ â”‚ 10 â”‚ 999499 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 10 rows in set. Elapsed: 0.343 sec. Processed 10.00 million rows, 40.00 MB (29.19 million rows/s., 116.74 MB/s.) LowCardinality(String) ç±»å‹ SELECT str_dic, count() FROM Dict GROUP BY str_dic â”Œâ”€str_dicâ”€â”¬â”€count()â”€â” â”‚ nine â”‚ 1000776 â”‚ â”‚ six â”‚ 1000936 â”‚ â”‚ two â”‚ 999412 â”‚ â”‚ three â”‚ 999515 â”‚ â”‚ one â”‚ 1000159 â”‚ â”‚ four â”‚ 999772 â”‚ â”‚ five â”‚ 1000329 â”‚ â”‚ ten â”‚ 999499 â”‚ â”‚ seven â”‚ 999680 â”‚ â”‚ eight â”‚ 999922 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 10 rows in set. Elapsed: 0.159 sec. Processed 10.00 million rows, 10.02 MB (62.71 million rows/s., 62.84 MB/s.) in æŸ¥è¯¢ int ç±»å‹ SELECT count() FROM Dict WHERE int_dic IN (1, 2, 3) â”Œâ”€count()â”€â” â”‚ 2999086 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.094 sec. Processed 10.00 million rows, 40.00 MB (106.04 million rows/s., 424.17 MB/s.) LowCardinality(String) ç±»å‹ SELECT count() FROM Dict WHERE str_dic IN ('one', 'two', 'three') â”Œâ”€count()â”€â” â”‚ 2999086 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.041 sec. Processed 10.00 million rows, 10.02 MB (240.81 million rows/s., 241.32 MB/s.) å•ä¸ªå€¼æŸ¥è¯¢ int ç±»å‹ SELECT count() FROM Dict WHERE int_dic = 1 â”Œâ”€count()â”€â” â”‚ 1000159 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.047 sec. Processed 10.00 million rows, 40.00 MB (213.06 million rows/s., 852.26 MB/s.) LowCardinality(String) ç±»å‹ SELECT count() FROM Dict WHERE str_dic = 'one' â”Œâ”€count()â”€â” â”‚ 1000159 â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 1 rows in set. Elapsed: 0.032 sec. Processed 10.00 million rows, 10.02 MB (310.69 million rows/s., 311.35 MB/s.) ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:3:0","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"ç»“è®º ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼ŒLowCardinality(String) ç±»å‹çš„æ€§èƒ½å¤§å¤§è¶…è¿‡æˆ‘çš„é¢„æœŸã€‚ä¸€å¼€ä»¥ä¸ºä¼šæ¯” int ç±»å‹ç¨å¾®æ…¢ç‚¹ è°çŸ¥å´æ¯” int çš„æ€§èƒ½å¥½ä¸Šä¸€å€ã€‚é€šè¿‡è¿™ä¸ªæµ‹è¯•é¡ºåˆ©è¯´æœäº†åŒäº‹ğŸ˜ ","date":"2020-12-31","objectID":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/:4:0","tags":["clickhousue"],"title":"ClickHouse ä¸­ç”¨ int ç±»å‹ä½œä¸ºå­—å…¸çš„æ•ˆç‡é«˜ï¼Œè¿˜æ˜¯ç”¨LowCardinality(String)","uri":"/2020_12_31_clickhouse-%E4%B8%AD%E7%94%A8-int-%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%AD%97%E5%85%B8%E7%9A%84%E6%95%88%E7%8E%87%E9%AB%98%E8%BF%98%E6%98%AF%E7%94%A8lowcardinalitystring/"},{"categories":["db"],"content":"é—®é¢˜ ä»Šå¤©åœ¨ä¿®æ”¹ ClickHouse é›†ç¾¤æ•°æ®åº“è¡¨ç»“æ„çš„æ—¶å€™ , ä¸çŸ¥é“ç”±äºä»€ä¹ˆåŸå›  , é€ æˆæœ‰ä¸¤ä¸ªèŠ‚ç‚¹ ( A å’Œ B , å…¶ä¸­ B æ˜¯å‰¯æœ¬èŠ‚ç‚¹ ) çš„ zookeeper çš„ metadata æ•°æ®ä¸ä¸€è‡´ æ¯æ¬¡åœ¨ä¸¤ä¸ªèŠ‚ç‚¹æ‰§è¡Œ alter table çš„è¯­å¥éƒ½ä¼šæŠ¥ Metadata on replica is not up to date with common metadata in Zookeeper é”™è¯¯ ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯æŠŠ A B èŠ‚ç‚¹çš„ zookeeper å†…çš„ columns çš„å€¼æ”¹æˆä¸€æ ·çš„å°±è¡Œäº† . æ²¡æƒ³åˆ°æ”¹äº†ä¹‹åè¿˜æ˜¯è¿™ä¸ªé”™ . æ²¡åŠæ³• , åªèƒ½é‡å»º zookeeper ä¸Šçš„ metadata æ•°æ® (åªé‡å»ºå‡ºé—®é¢˜çš„è¡¨ , å…¶ä»–çš„è¡¨ä¸åŠ¨) æ³¨æ„ : ä¸‹é¢æ‰€æœ‰çš„æ“ä½œæ²¡æœ‰ç‰¹åˆ«çš„è¯´æ˜éƒ½æ˜¯åœ¨ A èŠ‚ç‚¹ä¸Šè¿›è¡Œçš„ ","date":"2020-11-01","objectID":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/:1:0","tags":["clickhouse"],"title":"ClickHouse é‡å»º zookeeper é‡Œçš„å…ƒæ•°æ®(ClickHouse æ¢å¤æ•°æ®)","uri":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/"},{"categories":["db"],"content":"å¤‡ä»½æ•°æ® æ•°æ®æ•°æ®æ—¶æœ‰ä¸¤ä¸ªæƒ…å†µ : ClickHouse åœ¨è¿è¡Œä¸­ å…³äº freeze å…·ä½“çš„è¯´æ˜å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ ALTER TABLE $tab FREEZE è¿™ä¸ªè¯­å¥æ˜¯åœ¨ ClickHouse è¿è¡Œçš„æƒ…å†µä¸‹äº§ç”Ÿä¸€ä»½ $tab è¿™ä¸ªè¡¨çš„æ•°æ®å¤‡ä»½ å¤‡ä»½çš„æ•°æ®çš„æ•°æ®åœ¨ $ckä¸»ç›®å½•/shadow/$N/data/.... ä¸­ è·¯å¾„ä¸­çš„ $N æ˜¯ä¸ªå˜é‡ , è¡¨ç¤ºå¤‡ä»½æ¬¡æ•° , å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œé‚£ä¹ˆå€¼å°±æ˜¯ 1 ä¾‹å¦‚ : alter table hera.user freeze; è¿è¡Œä¸Šé¢çš„è¯­å¥å , è¿›å…¥å¯¹åº”çš„ç›®å½•è¿è¡Œ tree å‘½ä»¤çœ‹ä¸‹ç»“æœ user ç›®å½•ä¸‹å°±æ˜¯å¤‡ä»½çš„å„ä¸ª partition æ•°æ® ClickHouse å·²ç»åœæ­¢è¿è¡Œäº† ç›´æ¥è¿›å…¥ data ç›®å½•æŠŠæ•°æ®å¤åˆ¶ä¸€ä»½åˆ°å…¶ä»–ç›®å½• ä½¿ç”¨è¿™ç§æ–¹å¼ä¸€å®šè¦ç¡®ä¿ Clickhouse å·²ç»åœæ­¢è¿è¡Œ , è¦ä¸ç„¶å¤‡ä»½çš„æ•°æ®ä¼šæœ‰æŸåçš„é£é™© ","date":"2020-11-01","objectID":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/:2:0","tags":["clickhouse"],"title":"ClickHouse é‡å»º zookeeper é‡Œçš„å…ƒæ•°æ®(ClickHouse æ¢å¤æ•°æ®)","uri":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/"},{"categories":["db"],"content":"æ¢å¤æ•°æ® å»ºä¸´æ—¶è¡¨ create table hera.temp (.....) æŠŠä¸Šä¸€æ­¥å¤‡ä»½çš„æ•°æ®è½¬ç§»åˆ°æˆ–å¤åˆ¶åˆ°ä¸´æ—¶è¡¨çš„ detached ç›®å½•é‡Œ mvæˆ–cp /ck/shadow/1/data/hera/user/* /ck/data/hera/temp/detached chown clickhouse:clickhouse -R /ck/data/hera/temp/detached ä¸Šé¢çš„ç¬¬äºŒè¡Œæ˜¯ç¡®ä¿ detacehdç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„ç”¨æˆ·å’Œç»„æ˜¯ clickhouse è¦ä¸ç„¶æœ‰æƒé™é—®é¢˜ æ¢å¤ A èŠ‚ç‚¹æ•°æ® cd /ck/data/hera/temp/detached let i=1;for f in `ls -1` ; do echo $i $f;((i++)); echo \"alter table hera.temp attach part '$f';\"|clickhouse-client ; done è¿™ä¸€æ­¥æ˜¯æŠŠå¤‡ä»½çš„æ•°æ® attach åˆ° temp è¡¨ä¸­ è¿™ä¸€æ­¥å®Œæˆå A èŠ‚ç‚¹çš„æ•°æ®æ¢å¤å°±å®Œæˆäº† æ¢å¤ B èŠ‚ç‚¹æ•°æ® åœ¨ B èŠ‚ç‚¹ä¸Šä¹Ÿå»ºç«‹ä¸€ä¸ªä¸´æ—¶è¡¨ , ClickHouse è‡ªåŠ¨ä¼šä» A èŠ‚ç‚¹ä¸Šæ‹‰å–æ•°æ® ","date":"2020-11-01","objectID":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/:3:0","tags":["clickhouse"],"title":"ClickHouse é‡å»º zookeeper é‡Œçš„å…ƒæ•°æ®(ClickHouse æ¢å¤æ•°æ®)","uri":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/"},{"categories":["db"],"content":"æ‰«å°¾å·¥ä½œ åœ¨ A B èŠ‚ç‚¹ä¸Š drop æ‰zookeeper ä¸ä¸€è‡´çš„è¡¨ drop table user åœ¨ A B èŠ‚ç‚¹ä¸ŠæŠŠ temp è¡¨çš„åå­—ä¿®æ”¹ä¸ºåŸè¡¨çš„åå­— rename table temp to user ","date":"2020-11-01","objectID":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/:4:0","tags":["clickhouse"],"title":"ClickHouse é‡å»º zookeeper é‡Œçš„å…ƒæ•°æ®(ClickHouse æ¢å¤æ•°æ®)","uri":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/"},{"categories":["db"],"content":"å‚è€ƒ https://github.com/ClickHouse/ClickHouse/issues/7972 https://clickhouse.tech/docs/en/sql-reference/statements/alter/partition/#alter_freeze-partition ","date":"2020-11-01","objectID":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/:5:0","tags":["clickhouse"],"title":"ClickHouse é‡å»º zookeeper é‡Œçš„å…ƒæ•°æ®(ClickHouse æ¢å¤æ•°æ®)","uri":"/2020.11.1_clickhouse-%E9%87%8D%E5%BB%BA-zookeeper-%E9%87%8C%E7%9A%84%E5%85%83%E6%95%B0%E6%8D%AE/"},{"categories":["code"],"content":"è¿™æ®µæ—¶é—´éœ€è¦åšä¸€ä¸ªç­¾åéªŒè¯çš„æ¨¡å— . å› ä¸º golang çš„ rsa æ€§èƒ½é—®é¢˜éœ€è¦ç”¨ nginx-opensty æ¥å¼€å‘ , åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜å’Œç»“æœæ–¹æ³• , åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ . ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:0:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"å®‰è£… åœ¨ mac ä¸‹å¯ä»¥ç›´æ¥åœ¨ termina ä¸­ brew install openresty/brew/openresty æ¥å®‰è£… å®‰è£…å operesty çš„ç›®å½•åœ¨ /usr/local/Cellar/openresty/1.17.8.2_1 ä¸‹ , æœ€åæ˜¯ openrsty çš„ç‰ˆæœ¬å· nginx é…ç½®æ–‡ä»¶çš„ç›®å½•åœ¨ /usr/local/etc/openresty/ ä¸‹ nginx çš„æ—¥å¿—æ–‡ä»¶åœ¨ /usr/local/var/log/nginx/ ä¸‹ è¿™äº›ä¿¡æ¯éƒ½å¯ä»¥ä½¿ç”¨openresty -h æ¥æŸ¥çœ‹ å®‰è£…å¥½åå¯ä»¥ç›´æ¥ç”¨openresty æ¥å¯åŠ¨ é‡è½½é…ç½®æ–‡ä»¶æˆ–åœæ­¢ nginx å¯ä»¥ç”¨ openresty -s signal æ¥å®ç° , å’Œ nginx -s signal çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:1:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"hello world nginx çš„é»˜è®¤æ–‡ä»¶æ˜¯ /usr/local/etc/openresty/nginx.conf ä¿®æ”¹è¯¥é…ç½®æ–‡ä»¶ä¸­çš„ http å—æ·»åŠ æˆ‘ä»¬è‡ªå·±å·¥ä½œç›®å½•ä¸­çš„é…ç½®æ–‡ä»¶ include /Users/noelz/work/openresty/conf/*; ç„¶ååœ¨ ~/work/openresty/conf/ ä¸‹æ·»åŠ  a.conf æ–‡ä»¶ server { listen 6622; set $path /Users/noelz/work/openresty/code; location / { default_type text/html; lua_code_cache off; access_by_lua_file $path/hellow_world.lua; } } åœ¨ ~/work/openresty/code/ æ·»åŠ  hellow_world.lua æ–‡ä»¶ ngx.say('hello world') ç°åœ¨çš„ work ç›®å½•ä¸‹çš„ç»“æ„å¦‚ä¸‹ â”œâ”€â”€ code â”‚ â””â”€â”€ hellow_world.lua â””â”€â”€ conf â””â”€â”€ a.conf é‡è½½é…ç½®æ–‡ä»¶ openresty -s reload ç„¶ååœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ localhost:6622 ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:2:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"openresty çš„é¡¹ç›®ç»„ç»‡ ç¨å¾®å¤æ‚çš„ä¸€ç‚¹çš„åŠŸèƒ½éƒ½ä¸å¯èƒ½æ˜¯å•æ–‡ä»¶ , è‚¯å®šè¦å¼•ç”¨å…¶ä»–çš„æ¨¡å— . æ—¢ç„¶è¦å¼•ç”¨å…¶ä»–æ¨¡å— , è‚¯å®šè¦è®© openresty çŸ¥é“ä½ çš„ä»£ç ç›®å½•åœ¨å“ª . lua_package_path è¿™ä¸ªé…ç½®é¡¹å°±èƒ½å®Œæˆè¿™é¡¹åŠŸèƒ½ æ¯”å¦‚ä¸‹é¢è¿™ä¸ªé…ç½®æ–‡ä»¶ lua_package_cpath '/luatrace/code/?.so;/data/code/?.so;;'; lua_package_path '/luatrace/code/?.lua;/data/code/?.lua;;'; init_by_lua_file /luatrace/code/service/conf.lua; server { set $path /data/code/service; listen 80; location /get { default_type text/html; lua_code_cache off; access_by_lua_file $path/get.lua; } } è¿™ä¸ªé…ç½®çš„å‰ä¸¤è¡Œåˆ¶å®šäº† lua å’Œ c ä»£ç æˆ–èµ„æºåº“çš„åŠ è½½è·¯å¾„ æ¯”å¦‚åœ¨ get.lua æ–‡ä»¶ä¸­å¼•å…¥äº†å…¶ä»–çš„æ¨¡å— , å¯ä»¥è¿™æ ·æ¥å¼•å…¥ local signlib = require \"service.sign\" get.lua å’Œ sign.lua çš„æ–‡ä»¶ä½ç½®å¦‚ä¸‹ ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:3:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"openresty çš„åŠ å¯†åº“ lua_resty_nettle å› ä¸ºæˆ‘åšçš„æ˜¯ç­¾åéªŒè¯ç›¸å…³çš„é¡¹ç›® , è‚¯å®šéœ€è¦ä¸€äº› sha256 æˆ– hmac ä¹‹ç±»çš„åº“ . è€Œ**lua-resty-nettle** å°±æ˜¯å¹²è¿™ä¸ªçš„ å¦‚æœç”¨ openresty çš„åŒ…ç®¡ç†å™¨ opm æ¥å®‰è£…ä¸€èˆ¬ä¸ä¼šé‡åˆ°ä»€ä¹ˆé—®é¢˜ , ä½†æ˜¯ä¸€å¼€å§‹æˆ‘æ˜¯ç›´æ¥æŠŠ nettle åº“çš„ lua ä»£ç ç›´æ¥ä¸‹è½½ä¸‹æ¥æ”¾åˆ° openresty çš„ lib ç›®å½•ä¸‹ . å› ä¸º nettle åº“ä¼šå¼•ç”¨ c è¯­è¨€ç¼–è¯‘å¥½çš„ .so æ–‡ä»¶ , æ‰€ä»¥è¿˜éœ€è¦å®‰è£… c è¯­è¨€ç‰ˆçš„ nettle . ç›´æ¥ä½¿ç”¨ brew install nettle æ¥å®‰è£…å°±è¡Œäº† ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:4:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"openresty ä¸­ä¸åŒçš„é˜¶æ®µ åœ¨ openrest ä¸­å¯ä»¥æŒ‡å®šä¸åŒçš„åŠ è½½é˜¶æ®µæ¥æ‰§è¡Œä¸åŒçš„ lua ä»£ç  lua_package_cpath '/data/code/?.so;/data/code/?.so;;'; lua_package_path '/data/code/?.lua;/data/code/?.lua;;'; init_by_lua_file /data/code/service/conf.lua; server { set $path /data/code/service; listen 80; location /a { access_by_lua_file $path/get.lua; } location /b { rewrite_by_lua_file $path/inflate_body.lua; access_by_lua_file $path/post.lua; } } ç¬¬ä¸‰è¡Œçš„ init_by_lua_file æ˜¯ç”¨æ¥åŠ è½½å…¨å±€çš„é…ç½®æ–‡ä»¶çš„ , åœ¨ openresty åˆšå¯åŠ¨çš„æ—¶å€™è¿è¡Œ ç¬¬åä¸€è¡Œçš„ rewrite_by_lua_file é€šå¸¸æ˜¯ç”¨æ¥æ£€æŸ¥æ”¹å†™ URI ä½†ä¹Ÿå¯ä»¥æ“ä½œå“åº”ä½“ , åšç¼–ç è§£ç å·¥ä½œ . åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­å°±æ˜¯æ¥è§£å‹ gzip çš„ ç¬¬å…«è¡Œå’Œç¬¬åäºŒè¡Œçš„ access_by_lua_file å°±æ˜¯æ¥åšä¸»è¦çš„ä¸šåŠ¡é€»è¾‘çš„ , è¿”å›å…·ä½“çš„ç›¸åº”å†…å®¹ è¿˜æœ‰å…¶ä»–å‡ ä¸ªé˜¶æ®µ , æˆ‘è¿™é‡Œæ²¡æœ‰ç”¨åˆ° . å¯ä»¥åœ¨è¿™ä¸ªé“¾æ¥æ‰¾åˆ°æ›´å¤šçš„ä¿¡æ¯ ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:5:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"openresty ä¸­çš„å…¨å±€å˜é‡ åœ¨ openresty å¯åŠ¨çš„æ—¶å€™è¯»å–é…ç½®æ–‡ä»¶ , æŠŠé…ç½®æ–‡ä»¶çš„é…ç½®é¡¹æ”¾åˆ°å…¨å±€å˜é‡é‡Œ , æ–¹ä¾¿å…¶ä»–çš„æ¨¡å—æ¥ä½¿ç”¨ . è¿™ç§éœ€æ±‚å¯ä»¥ä½¿ç”¨æ¨¡å—å˜é‡æ¥è§£å†³ . å®šä¹‰åœ¨æ¨¡å—é‡Œé¢çš„å˜é‡ç§°ä¸ºæ¨¡å—å˜é‡ã€‚æ— è®ºå®šä¹‰å˜é‡æ—¶æœ‰æ²¡æœ‰åŠ  local ï¼Œæœ‰æ²¡æœ‰é€šè¿‡ _M æŠŠå˜é‡å¼•ç”¨èµ·æ¥ï¼Œ å®šä¹‰åœ¨æ¨¡å—é‡Œé¢çš„å˜é‡éƒ½æ˜¯æ¨¡å—å˜é‡ . æ¯”å¦‚åœ¨ä¸Šé¢çš„é…ç½®æ–‡ä»¶çš„ç¬¬ä¸‰è¡Œä¸­çš„ lua ä»£ç å°±æ˜¯è¯»å–äº†é…ç½®æ–‡ä»¶ç„¶åè¿”å›ä¸€ä¸ªæ¨¡å—å˜é‡ local lfs = require(\"lfs\") local str = require \"lib.str\" local conf = {} local path = '/data/conf/' for file in lfs.dir(path) do if string.match(file, '.json') then local key = str.split(file, '.')[1] file = io.open(path .. '/' .. file, \"r\") local content = file:read('*all') file:close() conf[key] = content end end return conf ç„¶ååœ¨å…¶ä»–çš„æ¨¡å—ä¸­å°±å¯ä»¥å¼•ç”¨ä¸Šé¢çš„ conf æ¨¡å—äº† -- å¼•å…¥ conf æ¨¡å— , å®ƒå°±æ˜¯ä¸ªå…¨å±€å˜é‡ local conf = require \"service.conf\" print(conf['xxx']) ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:6:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["code"],"content":"lua çš„ split å’Œ hex è™½ç„¶ lua ä¸­æœ‰ string.gmatch è¿™æ ·ä¸‡èƒ½çš„å­—ç¬¦ä¸²æ“ä½œåº“ , ä½†æ˜¯æˆ‘åªæ˜¯ä¸´æ—¶ç”¨ä¸‹ lua , gmatch è¿™ä¸ªå‡½æ•°æˆ‘æœ‰ç‚¹ç”¨ä¸æ¥ . æ‰€ä»¥ä¸‹é¢æ˜¯æˆ‘å°è£…çš„å­—ç¬¦ä¸²åˆ†å‰² , ä»¥åŠå­—ç¬¦ä¸²è½¬ 16 è¿›åˆ¶çš„ä¸¤ä¸ªå‡½æ•° function split(inputstr, sep) inputstr = inputstr or '' if sep == nil then sep = \"%s\" end local t = {} for str in string.gmatch(inputstr, \"([^\" .. sep .. \"]+)\") do table.insert(t, str) end return t end function hex(str, spacer) return string.lower((string.gsub(str, \"(.)\", function(c) return string.format(\"%02X%s\", string.byte(c), spacer or \"\") end))) end ","date":"2020-09-12","objectID":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/:7:0","tags":["nginx"],"title":"openresty å¼€å‘è®°å½•","uri":"/2020.9.12_openresty-%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/"},{"categories":["db"],"content":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"åœ¨ clickhouse ä¸­ç»å¸¸é‡åˆ°æŠŠæ•°ç»„è½¬ä¸ºåˆ—çš„æƒ…å†µ . ","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/:0:0","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"ä¸€ä¸ªæ•°ç»„è½¬ä¸ºåˆ— ä¸€ä¸ªæ•°ç»„è½¬åˆ—çš„æƒ…å†µå¾ˆç®€å• , ç›´æ¥ä½¿ç”¨ arrayjoin å‡½æ•°æ¥å®ç° select arrayJoin([1,2,3,4]) n ","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/:1:0","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"ä¸¤ä¸ªæ•°ç»„è½¬ä¸ºä¸¤åˆ—é‡åˆ°çš„é—®é¢˜ ç°æœ‰ä¸¤ä¸ªæ•°ç»„ , æƒ³è¦æŠŠè¿™ä¸¤ä¸ªæ•°ç»„è½¬ä¸ºä¸¤åˆ— . æ¯”å¦‚ å˜ä¸º æŒ‰ç…§ä¸Šé¢çš„ç»éªŒåˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªæ•°ç»„ä½¿ç”¨ arrayjoin , ä½†æ˜¯ç»“æœæ˜æ˜¾ä¸ç¬¦åˆæˆ‘é¢„æœŸ with [1,2,3,4] as number, ['a','b','c','d'] as str select arrayJoin(number) n, arrayJoin(str) s; clickhouse æ˜æ˜¾æ˜¯æŠŠä¸¤åˆ—åšäº†ç¬›å¡å°”ç§¯ ","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/:2:0","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"è§£å†³é—®é¢˜ è¿™æ—¶å¯ä»¥ç”¨ clickhouse çš„é«˜çº§å‡½æ•° arraymap å’Œ tuple é…åˆæ¥å®ç°è¿™ä¸ªå˜æ¢ arraymap çš„æ•ˆæœå’Œ java8 é‡Œçš„ map æ˜¯ä¸€æ ·çš„ . å³å¯¹æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ åšå¤„ç†ç„¶åè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ ä¸Šå›¾å°±æ˜¯å¯¹ [1,2,3] æ•°ç»„è¿›è¡ŒåŠ ä¸€ , ç„¶åè¿”å› [2,3,4] tuple é‡Œå¯ä»¥è£…ä¸åŒç±»å‹çš„æ•°æ® , ä¸‹å›¾å°±æ˜¯æŠŠä¸€ä¸ª int å’Œä¸€ä¸ª string æ”¾åœ¨äº†ä¸€ä¸ª tuple é‡Œ å…³äº tuple æ›´å¤šçš„æ“ä½œå¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ arrymap ä¸å…‰å¯ä»¥å¯¹ä¸€ä¸ªæ•°ç»„è¿›è¡Œæ“ä½œ , è¿˜å¯ä»¥æŠŠä¸åŒçš„æ•°ç»„æ”¾åˆ°ä¸€ä¸ª tuple æ•°ç»„ä¸­ . å®˜æ–¹æ–‡æ¡£çš„ç¤ºä¾‹å¦‚ä¸‹ : è¿™ç§æ–¹æ³•å°±èƒ½å®ç°æˆ‘ä»¬çš„ç›®æ ‡ \\ tuple.1 å°±æ˜¯å¼•ç”¨ tuple å†…ç¬¬ä¸€ä¸ªå…ƒç´  , è¿™é‡Œä¹Ÿçœ‹å‡º clickhouse çš„ç´¢å¼•ä¸‹æ ‡æ˜¯ä» 1 å¼€å§‹çš„ ","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/:3:0","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"ç»“æœ æœ€åç»“æœå°±æ˜¯é€šè¿‡ arraymap å’Œ tuple é…åˆæ¥å®ç° sql å¦‚ä¸‹ with [1,2,3,4] as number, ['a','b','c','d'] as str select arrayJoin(arrayMap((x, y)-\u003e (x, y), number, str)) tuple, tuple.1 n, tuple.2 s; ","date":"2020-09-04","objectID":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/:4:0","tags":["clickhouse"],"title":"clickhouseå¦‚ä½•æŠŠä¸¤æ•°ç»„è½¬ä¸ºä¸¤åˆ—","uri":"/2020.9.4_clickhouse%E5%A6%82%E4%BD%95%E6%8A%8A%E4%B8%A4%E6%95%B0%E7%BB%84%E8%BD%AC%E4%B8%BA%E4%B8%A4%E5%88%97/"},{"categories":["db"],"content":"2021-01-15 æ—¥æ›´æ–° æœ€è¿‘å‘ç° IPv4StringToNum æ˜¯ç”¨æ¥æ¯”è¾ƒç‰ˆæœ¬å·æ˜¯æ›´ç®€å•ï¼Œæ€§èƒ½æ›´å¥½çš„æ–¹å¼ã€‚ select IPv4StringToNum('2.7.14.23') \u003c IPv4StringToNum('2.12.8.12') comparse; ä¸Šé¢çš„ç»“æœæ˜¯ 1 ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸ ä½†æ˜¯è¿™ä¸ªå‡½æ•°æœ‰ä¸ªç¼ºç‚¹ï¼Œç‰ˆæœ¬å·å¿…é¡»ç¬¦åˆ ipv4 çš„æ ¼å¼ï¼Œå¦è€… IPv4StringToNum ä¼šç›´æ¥è¿”å›0 ä½†å·§åˆçš„æ˜¯ç›®å‰æˆ‘ä»¬ä¸šåŠ¡çš„ç‰ˆæœ¬å·å°±æ˜¯ 1.2.3.4 è¿™ç§æ ¼å¼ï¼Œæ­£å·§ç¬¦åˆ ipv4ã€‚ ç‰ˆæœ¬å·é¢„å¤„ç† å¯¹äºä¸ç¬¦åˆ ipv4 çš„ç‰ˆæœ¬å·å¯ä»¥ç¨å¾®å¤„ç†ä¸‹ï¼Œæ¯”å¦‚åªæœ‰ä¸¤ä½ï¼ˆ1.2ï¼‰æˆ–ä¸‰ä½çš„ç‰ˆæœ¬å·ï¼ˆ1.2.3ï¼‰è¦è¡¥å…¨æˆ ipv4 çš„å½¢å¼ with '1.2' as shortVersion select concat(shortVersion, repeat('.0', toUInt64(4 - length(splitByString('.', shortVersion))))); åŸç† clickhouse æ˜¯å¦‚ä½•æŠŠ ipv4 çš„å­—ç¬¦ä¸²å˜ä¸º number çš„ï¼Ÿç»è¿‡æŸ¥è¯¢æ‰¾åˆ°äº† clickhouse çš„è®¡ç®—æµç¨‹ æ¯”å¦‚ä¸€ä¸ªå½¢å¦‚64.233.187.99çš„ ipv4 åœ°å€ï¼Œä¼šç»è¿‡å¦‚ä¸‹çš„è®¡ç®— 64*2^24 + 233*2^16 + 187*2^8 + 99 = 1089059683 è¿™å’Œ clickhouse çš„ç»“æœå®Œå…¨ä¸€è‡´ ","date":"2020-08-25","objectID":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/:1:0","tags":["clickhouse"],"title":"clickhouse æ¯”è¾ƒç‰ˆæœ¬å·","uri":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["db"],"content":"ä»¥ä¸‹ä¸ºåŸæ–‡ç«  å¦‚æœæƒ³è¦æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬å·çš„å­—ç¬¦ä¸², æ¯”å¦‚ select '5.6.8.10'\u003e'5.6.8.2' ç»“æœè‚¯å®šæ˜¯0å³åè€…æ¯”è¾ƒå¤§, ä½†æ˜¯åœ¨ç‰ˆæœ¬å·çš„è¯­ä¹‰ä¸­æ˜æ˜æ˜¯å‰è€…æ¯”è¾ƒå¤§. åœ¨ mysql ä¸­å·²ç»æœ‰äº†è§£å†³æ–¹æ¡ˆ, ä½†æ˜¯åœ¨ clickhouse ä¸­æˆ‘è¿˜æ²¡æœ‰åœ¨ç½‘ç»œä¸Šæœç´¢åˆ°. ä½†æ˜¯å¯ä»¥å€Ÿç”¨ mysql çš„æ€è·¯æ¥è§£å†³ ","date":"2020-08-25","objectID":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/:2:0","tags":["clickhouse"],"title":"clickhouse æ¯”è¾ƒç‰ˆæœ¬å·","uri":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["db"],"content":"æ€è·¯ æŠŠç‰ˆæœ¬å·æŒ‰.åˆ†å‰², è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„. ä½¿ç”¨ splitByString å‡½æ•°æ¥åˆ†å‰² ç„¶åå¯¹æ•°ç»„æ¯ä¸€ä¸ªå…ƒç´ å¡«å……å­—ç¬¦ '0' ä½¿æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ 10 ä½, æ¯”å¦‚ä¸Šä¸€æ­¥å¾—åˆ°çš„å­—ç¬¦ä¸²æ•°ç»„æ˜¯ ['5','6','8','10']. é‚£ä¹ˆå¡«å……ç»“æœæ˜¯ ['0000000005','0000000006','0000000008','0000000010'] . è¿™ä¸€æ­¥å¯ä»¥ä½¿ç”¨ arrayMap å‡½æ•°æ¥æ“ä½œæ•°ç»„å†…æ¯ä¸€ä¸ªå…ƒç´ . arrayMap çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ ç„¶åæŠŠä¸Šä¸€æ­¥å¾—åˆ°çš„æ–°æ•°ç»„æ‹¼æ¥ä¸ºä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸², å¯ä»¥ä½¿ç”¨ arrayStringConcat å‡½æ•°æ¥å®Œæˆ. è¿™ä¸€æ­¥çš„ç»“æœä¸º0000000005000000000600000000080000000010 ç„¶åå¯ä»¥æ‹¿ä¸Šä¸€æ­¥æ‹¼æ¥çš„å­—ç¬¦ä¸²ç›´æ¥æ¯”è¾ƒäº† ","date":"2020-08-25","objectID":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/:3:0","tags":["clickhouse"],"title":"clickhouse æ¯”è¾ƒç‰ˆæœ¬å·","uri":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["db"],"content":"å®Œæ•´çš„ sql with arrayStringConcat(arrayMap(x -\u003e concat(repeat('0', toUInt16(10 - length(x))), x), splitByString('.', '5.6.8.10')), '') as ver1, arrayStringConcat(arrayMap(x -\u003e concat(repeat('0', toUInt16(10 - length(x))), x), splitByString('.', '5.6.8.2')), '') as ver2 select ver1 \u003e ver2; ","date":"2020-08-25","objectID":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/:4:0","tags":["clickhouse"],"title":"clickhouse æ¯”è¾ƒç‰ˆæœ¬å·","uri":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":["db"],"content":"å‚è€ƒ https://tiramisu-navy.github.io/2018/09/27/mysql-compare-version(varchar)/ https://clickhouse.tech/docs/en/sql-reference/functions/higher-order-functions/#higher_order_functions-array-map https://stackoverflow.com/questions/34876711/mysql-query-compare-version-numbers ","date":"2020-08-25","objectID":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/:5:0","tags":["clickhouse"],"title":"clickhouse æ¯”è¾ƒç‰ˆæœ¬å·","uri":"/2020.8.25_clickhouse-%E5%A6%82%E4%BD%95%E6%AF%94%E8%BE%83%E7%89%88%E6%9C%AC%E5%8F%B7%E5%AD%97%E7%AC%A6%E4%B8%B2/"},{"categories":[],"content":"é—®é¢˜ linuxçš„topå‘½ä»¤çš„é»˜è®¤æ˜¾ç¤ºæ–¹å¼ä¸æ˜¯å¾ˆç›´è§‚ã€‚æ¯”å¦‚å†…å­˜çš„æ˜¾ç¤ºæ–¹å¼æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½ï¼›æ¯æ¬¡åˆ·æ–°çš„é—´éš”å¤ªæ…¢ï¼›å¤šä¸ªcpuæ ¸å¿ƒæ²¡æœ‰å…¨éƒ¨æ˜¾ç¤ºç­‰ã€‚æ¯æ¬¡è¿›å…¥topçš„ç•Œé¢éƒ½è¦è®¾ç½®ä¸€é˜µå­æ‰èƒ½èˆ’é€‚çš„ä½¿ç”¨ã€‚ä½†æ˜¯æ¯æ¬¡éƒ½è¦è®¾ç½®å°±å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« å°±æ˜¯æ¥å±•ç¤ºæˆ‘çš„topå‘½ä»¤çš„ä¸€äº›è®¾ç½®ä»¥åŠå¦‚æœä¿å­˜è¿™äº›è®¾ç½®ã€‚ ","date":"2020-07-10","objectID":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/:1:0","tags":["linux"],"title":"linuxçš„topå‘½ä»¤å¦‚ä½•ä¿å­˜è®¾ç½®","uri":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/"},{"categories":[],"content":"å¦‚ä½•ä¿å­˜è®¾ç½® ä½¿ç”¨å¤§å†™çš„Wæ¥ä¿å­˜è‡ªå®šä¹‰çš„è®¾ç½®ï¼ŒæŒ‰ä¸‹Wåtopç•Œé¢ä¸Šä¼šæ˜¾ç¤ºè®¾ç½®ä¿å­˜çš„è·¯å¾„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ","date":"2020-07-10","objectID":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/:2:0","tags":["linux"],"title":"linuxçš„topå‘½ä»¤å¦‚ä½•ä¿å­˜è®¾ç½®","uri":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/"},{"categories":[],"content":"ä¸ªäººè®¾ç½® ä¸‹é¢æ˜¯æˆ‘çš„ä¸€äº›ä¸ªæ€§åŒ–è®¾ç½® å†…å­˜ä¸ºMBä¸ºå•ä½æ˜¾ç¤º æŒ‰å¤šæ¬¡eåˆ‡æ¢å„ä¸ªè¿›ç¨‹çš„å†…å­˜å•ä½ æŒ‰å¤šæ¬¡Eåˆ‡æ¢æ¦‚è§ˆä¿¡æ¯çš„å†…å­˜å•ä½ï¼Œè°ƒæ•´å‰åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤º è°ƒæ•´å‰ï¼š è°ƒæ•´åï¼š åˆ·æ–°é¢‘ç‡ topçš„é»˜è®¤é¢‘ç‡å¥½åƒæ˜¯3sï¼Œæœ‰æ—¶åšå‹åŠ›æµ‹è¯•çš„æ—¶å€™éœ€è¦æ›´é«˜é¢‘çš„å˜åŒ–ã€‚è¾“å…¥dæ¥ä¿®æ”¹é¢‘ç‡ï¼Œå¡«å…¥æ•°å­—åï¼Œå›è½¦é”®ç¡®å®šã€‚å•ä½ä¸ºç§’ï¼Œæ”¯æŒå°æ•°ã€‚æˆ‘çš„é¢‘ç‡æ˜¯0.3ç§’ ä¸‹å›¾å°±æ˜¯ä»3ç§’æ”¹ä¸º0.3ç§’ æ˜¾ç¤ºå…¨éƒ¨çš„cpu æŒ‰æ•°å­—1æ¥æ˜¾ç¤ºå¤šä¸ªæ ¸å¿ƒçš„cpu æ•ˆæœå¦‚å›¾ ä¿®æ”¹å†…å­˜å ç”¨çš„è¿›åº¦æ¡ æŒ‰å¤šæ¬¡mæ¥ä¿®æ”¹ ä¿®æ”¹å‰ ä¿®æ”¹å æˆ‘æ¯”è¾ƒå–œæ¬¢è¿™ç§æ˜¾ç¤ºæ–¹å¼ï¼Œæ„Ÿè§‰æ¯”è¾ƒç›´è§‚ï¼Œèƒ½å¤Ÿç›´è§‚çœ‹å‡ºå†…å­˜çš„å¤§ä½“å ç”¨æƒ…å†µ ","date":"2020-07-10","objectID":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/:3:0","tags":["linux"],"title":"linuxçš„topå‘½ä»¤å¦‚ä½•ä¿å­˜è®¾ç½®","uri":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/"},{"categories":[],"content":"å‚è€ƒ https://haydenjames.io/linux-top-customize-it/ ","date":"2020-07-10","objectID":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/:4:0","tags":["linux"],"title":"linuxçš„topå‘½ä»¤å¦‚ä½•ä¿å­˜è®¾ç½®","uri":"/2020.7.10_linux%E7%9A%84top%E5%91%BD%E4%BB%A4%E5%A6%82%E4%BD%95%E4%BF%9D%E5%AD%98%E8%AE%BE%E7%BD%AE/"},{"categories":[],"content":"æœ€è¿‘éœ€è¦æµ‹è¯•gzipç›¸å…³çš„å†…å®¹ã€‚å…¶ä¸­æœ‰ä¸€é¡¹éœ€è¦å¯¹ç»è¿‡gzipå‹ç¼©çš„request bodyè¿›è¡Œå¤„ç†ã€‚å¹³æ—¶æµ‹è¯•æ¥å£éƒ½æ˜¯ä½¿ç”¨postmanï¼Œè¿™æ¬¡æˆ‘ä¹Ÿå¸Œæœ›ç”¨postmanæ¥å®Œæˆ ","date":"2020-06-30","objectID":"/2020.6.30_postman%E5%8F%91%E9%80%81gzip%E7%9A%84%E8%AF%B7%E6%B1%82/:0:0","tags":[],"title":"ä½¿ç”¨Postmanå‘é€ç»è¿‡gzipå‹ç¼©çš„request body","uri":"/2020.6.30_postman%E5%8F%91%E9%80%81gzip%E7%9A%84%E8%AF%B7%E6%B1%82/"},{"categories":[],"content":"å®ç° é¦–å…ˆè¯·æ±‚çš„headerä¸­å¿…é¡»æœ‰Content-Encoding=gzipï¼Œå¦‚å›¾æ‰€ç¤º æƒ³è¦ä½¿ç”¨postmanå‘é€gzipå‹ç¼©çš„è¯·æ±‚ï¼Œåªèƒ½é€šè¿‡å‘é€æ–‡ä»¶çš„æ–¹å¼ã€‚æ‰€ä»¥è¦å…ˆæŠŠè¦å‘é€çš„å†…å®¹ç”Ÿæˆgzipæ–‡ä»¶ func TestGzip(t *testing.T) { var b bytes.Buffer w := gzip.NewWriter(\u0026b) _, _ = w.Write([]byte(\"gzip content.......\")) _ = w.Close() fmt.Println(ioutil.WriteFile(\"./gzip.txt\", b.Bytes(), os.FileMode(0777))) } ä¸Šé¢çš„goç¨‹åºå°±æ˜¯æŠŠgzip content.....è¿™ä¸ªstringå‹ç¼©ä¸ºgzipæ–‡ä»¶ ç„¶ååœ¨bodyé€‰é¡¹ä¸­é€‰æ‹©binaryç±»å‹ï¼Œé€‰æ‹©ä¸Šä¸€æ­¥ç”Ÿæˆçš„æ–‡ä»¶ã€‚ç‚¹å‡»å‘é€ ","date":"2020-06-30","objectID":"/2020.6.30_postman%E5%8F%91%E9%80%81gzip%E7%9A%84%E8%AF%B7%E6%B1%82/:1:0","tags":[],"title":"ä½¿ç”¨Postmanå‘é€ç»è¿‡gzipå‹ç¼©çš„request body","uri":"/2020.6.30_postman%E5%8F%91%E9%80%81gzip%E7%9A%84%E8%AF%B7%E6%B1%82/"},{"categories":["code","db"],"content":"é—®é¢˜ è¿™ä¸¤å¤©éœ€è¦æŠŠClickHouseçš„æŸ¥è¯¢ç»“æœè¿›è¡Œç»Ÿè®¡ç„¶åå­˜å‚¨èµ·æ¥ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡æŸ¥è¯¢çš„å‡ºæ¥çš„æ•°æ®é‡éå¸¸å¤§ã€‚è¡Œæ•°å¾ˆå¤šï¼ŒæŸä¸€å¤©çš„countç»Ÿè®¡å¦‚ä¸‹ï¼š æ¯æ¬¡æŸ¥è¯¢çš„æ•°æ®æœ‰ä¸Šäº¿è¡ŒğŸ˜¢ã€‚åœ¨ClickHouseæŸ¥è¯¢å‡ºç»“æœåè¿”å›ç»™client(å°±æ˜¯æˆ‘å†™çš„ç¨‹åº)ï¼Œä½†æ˜¯ç”±äºè¿™ä¸ªä»»åŠ¡æ˜¯åœ¨k8så†…è¿è¡Œï¼Œé™åˆ¶åªæœ‰400mçš„å†…å­˜ã€‚æ‰€ä»¥å¾ˆå¿«å°±å› ä¸ºå†…å­˜æº¢å‡ºè€Œå´©æºƒã€‚ ","date":"2020-05-26","objectID":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/:1:0","tags":["golang","clickhouse"],"title":"golangå¤„ç†æ•°æ®åº“è¿”å›å¤§é‡æ•°æ®","uri":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/"},{"categories":["code","db"],"content":"ä¹‹å‰çš„ä»£ç  ä¸€èˆ¬çš„æƒ…å†µä¸‹éƒ½æ˜¯æŠŠæŸ¥è¯¢ç»“æœéƒ½æ”¾åˆ°sliceå†…å†è¿”å›æ¯”å¦‚è¿™æ ·ï¼š for scanner.Next() { value := reflect.New(base) if values, err := mapStructFieldsIntoSlice(value, columns, strict); err != nil { return err } else { if err := scanner.Scan(values...); err != nil { return err } else { appendFn(value) } } } ä¸Šé¢ä»£ç å¾ªç¯è°ƒç”¨nextæ–¹æ³•ï¼Œç„¶åæŠŠè¯»å–çš„ä¸€è¡Œè¡Œæ•°æ®æ”¾åˆ°sliceä¸­ï¼Œè¿™æ ·å¾ˆå¿«å°±å†…å­˜æº¢å‡ºäº†ã€‚ ä½†æ˜¯ClickHosueçš„driveå†…å¹¶ä¸æ˜¯ä¸€ä¸‹å°±æŠŠæ‰€æœ‰çš„æ•°æ®å–å›ï¼Œè€Œæ˜¯ç»´æŠ¤ä¸€ä¸ªstreamã€‚ å½“è°ƒç”¨rows.next()æ—¶Clickhouseå®ç°çš„Rowså¯¹è±¡ä¼šä»streamä¸­è¯»å–ä¸€ä¸ªblockï¼š è®©æˆ‘ä»¬çœ‹çœ‹streamçš„å®šä¹‰ï¼š streamå°±æ˜¯ä¸€ä¸ªå®¹é‡ä¸º50çš„channelï¼Œä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬ä¸æ‰§è¡Œnextæ—¶ï¼Œstreamæœ€å¤šæœ‰50è¡Œçš„æŸ¥è¯¢ç»“æœï¼Œè¿™æ ·å°±é¿å…çš„äº†è¿”å›å¤§é‡çš„æŸ¥è¯¢ç»“æœè€Œé€ æˆçš„å´©æºƒã€‚ ","date":"2020-05-26","objectID":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/:2:0","tags":["golang","clickhouse"],"title":"golangå¤„ç†æ•°æ®åº“è¿”å›å¤§é‡æ•°æ®","uri":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/"},{"categories":["code","db"],"content":"è§£å†³ é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨chanæ¥è§£å†³ func BatchScanRows(db *sql.DB, ch chan interface{}, dest interface{}, query string, args ...interface{}) error { ..... çœç•¥éƒ¨åˆ†ä»£ç  ....... go func() { defer close(ch) for rows.Next() { v := reflect.New(itemType) err := rows.Scan(span(v.Interface(), columnIdx)...) if err != nil { logx.Error(err) break } ch \u003c- v.Interface() } }() return nil } ä½¿ç”¨chanæ¥æ¥æ”¶rows.nextçš„è¿”å›ï¼Œè¿™ä¸ªchanæˆ‘è®¾ç½®çš„å¤§å°æ˜¯50000ã€‚ç„¶åå†å¯åŠ¨ä¸€ä¸ªgoroutineå¼‚æ­¥æ‰§è¡Œï¼Œä¿è¯ç«‹å³è¿”å›ã€‚ func queryCH(heraCH *sql.DB, startStr string, endStr string) (map[int]statInfo, error) { chSQL := `select * from xxx` weeklyInfos := []*weeklyInfo{} ch := make(chan interface{}, 50000) err := ckgroup.BatchScanRows(heraCH, ch, \u0026weeklyInfos, chSQL, startStr, endStr) if err != nil { if err == sqlx.ErrNotFound { return nil, nil } return nil, err } statMap := map[int]statInfo{} //å¾ªç¯è¯»å–chanï¼Œç›´åˆ°chan close for data := range ch { v := data.(*weeklyInfo) weeklyId, err := getWeeklyId(v.Path) if err != nil { logx.Error(err) continue } statInfoItem := statMap[weeklyId] statInfoItem.ViewCount++ statInfoItem.ViewTotal += int64(v.StayTime) statMap[weeklyId] = statInfoItem } return statMap, nil } è¿™æ ·å°±èƒ½è¾¹å¤„ç†è¾¹ä»Clickhouseçš„æœåŠ¡å™¨ä¸­å–æ•°æ® ","date":"2020-05-26","objectID":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/:3:0","tags":["golang","clickhouse"],"title":"golangå¤„ç†æ•°æ®åº“è¿”å›å¤§é‡æ•°æ®","uri":"/2020.5.26_golang%E5%A4%84%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%94%E5%9B%9E%E5%A4%A7%E9%87%8F%E6%95%B0%E6%8D%AE/"},{"categories":["tool"],"content":"clashé…ç½®è¯´æ˜","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"é—®é¢˜ åœ¨Macä¸‹æƒ³è¦èˆ’æœçš„ä½¿ç”¨UnblockNeteaseMusicè‚¯å®šè¦å’Œclashxé…åˆä½¿ç”¨ï¼Œæˆ‘åœ¨ä½¿ç”¨clashxæ—¶é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œç°åœ¨è®°å½•ä¸‹æ¥æ–¹ä¾¿å¤§å®¶å‚è€ƒ ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:1:0","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"ç®€å•ä½¿ç”¨ ä¸‹è½½åœ°å€ clashxçš„é…ç½®æ–‡ä»¶å¤¹è·¯å¾„åœ¨~/.config/clash/ä¸‹ï¼Œæˆ–è€…ç›´æ¥åœ¨çŠ¶æ€æ é€šè¿‡guiæ“ä½œ é…ç½®æ–‡ä»¶éƒ½æ˜¯ä»¥yamlç±»å‹çš„ã€‚åœ¨é…ç½®æ–‡ä»¶å¤¹ä¸‹å¯ä»¥å­˜åœ¨å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿åœ¨ç•Œé¢ä¸Šåˆ‡æ¢ä¸åŒçš„é…ç½®ï¼Œå¦‚ä¸Šå›¾çš„ä¸‰ä¸ªé…ç½®æ–‡ä»¶testï¼Œconfigï¼Œali åªæœ‰åœ¨è®¾ç½®ä¸ºç³»ç»Ÿä»£ç†çš„æƒ…å†µä¸‹æ‰èƒ½ä½¿ä»£ç†æœ‰æ•ˆ ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:2:0","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"æˆ‘ä½¿ç”¨åˆ°çš„é…ç½® è¯¦ç»†çš„é…ç½®æ–‡æ¡£å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æ¥ï¼Œä¸‹é¢è¯´çš„éƒ½æ˜¯æˆ‘ç»å¸¸ç”¨åˆ°çš„ ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:3:0","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"Proxyå­—æ®µ proxyå­—æ®µæ¥å—å¯¹è±¡æ•°ç»„ï¼Œè¯¥å­—æ®µç”¨æ¥åˆ¶å®šä»£ç†æœåŠ¡å™¨çš„æè¿°ï¼Œæ¯”å¦‚ä»£ç†æœåŠ¡å™¨çš„ç±»å‹ï¼Œipåœ°å€ï¼Œç«¯å£ç­‰ Proxy:- name:\"Unblock\"type:ssserver:music.desperadoj.comport:30001cipher:aes-128-gcmpassword:desperadoj.com- name:\"http_proxy\"type:httpserver:111.168.1.1port:1111 ä¸Šé¢å°±å£°æ˜äº†ä¸¤ä¸ªä»£ç†ï¼Œåœ¨åé¢çš„å­—æ®µä¸­ä½¿ç”¨ ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:3:1","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"Proxy Groupå­—æ®µ è¯¥å­—æ®µåœ¨æœ‰å¤šä¸ªä»£ç†æºçš„æƒ…å†µä¸‹ï¼Œæ ¹æ®ç­–ç•¥ä¸åŒé€‰æ‹©ä¸ç”¨çš„ä»£ç†æº ç­–ç•¥æœ‰ä»¥ä¸‹å‡ ç§ï¼š url-test å¯ä»¥è‡ªåŠ¨é€‰æ‹©ä¸æŒ‡å®š URL æµ‹é€Ÿåï¼Œå»¶è¿Ÿæœ€çŸ­çš„æœåŠ¡å™¨ allback å¯ä»¥å°½é‡æŒ‰ç…§ç”¨æˆ·ä¹¦å†™çš„æœåŠ¡å™¨é¡ºåºï¼Œåœ¨ç¡®ä¿æœåŠ¡å™¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨é€‰æ‹©æœåŠ¡å™¨ load-balance å¯ä»¥ä½¿ç›¸åŒ eTLD è¯·æ±‚åœ¨åŒä¸€æ¡ä»£ç†çº¿è·¯ä¸Š select ç”¨æ¥å…è®¸ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹© ä»£ç†æœåŠ¡å™¨ æˆ– æœåŠ¡å™¨ç»„ ä¸‹é¢çš„äº‹ä¾‹æ˜¯selectç±»å‹çš„ç­–ç•¥ Proxy Group:- name:\"ğŸµ Netease Music\"type:selectproxies:- ğŸ¶ Unblock- DIRECT ä¸Šé¢çš„é…ç½®é‡Œæˆ‘æŒ‡å®šäº†ä¸¤ä¸ªä»£ç†æºï¼Œåœ¨guié‡Œçš„åé¦ˆå°±æ˜¯è¿™æ ·çš„ï¼š è¿™ç§ç­–ç•¥æ–¹ä¾¿æˆ‘ä»¬æ‰‹åŠ¨çš„åˆ‡æ¢ ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:3:2","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"Ruleå­—æ®µ è¯¥å­—æ®µä¹Ÿæ˜¯æ•°ç»„ï¼Œæ•°ç»„çš„itemæ˜¯å­—ç¬¦ä¸² è¯¥å­—ç¬¦ä¸²ç”±é€—å·åˆ†éš”,å…·ä½“çš„è§„åˆ™æ˜¯ï¼šåŒ¹é…è§„åˆ™,åŒ¹é…æº,ä½¿ç”¨å“ªä¸ªä»£ç† Rule:# domainç±»å‹æ˜¯å…¨åŒ¹é…ï¼Œåªæœ‰è®¿é—®çš„urlæ˜¯apps.apple.comæ—¶ï¼Œæ‰æ˜¯ä½¿ç”¨åä¸ºâ€œğŸµ Netease Musicâ€çš„ä»£ç†- DOMAIN,apps.apple.com,ğŸµ Netease Music#DOMAIN-SUFFIXæ˜¯åç¼€åŸŸååŒ¹é…,ä¾‹å¦‚è¿™ä¸ªè§„åˆ™å¯ä»¥åŒ¹é…blog.126.comè¿™ä¸ªurlï¼Œä¹‹åä½¿ç”¨\"direct\"è¿™ä¸ªä»£ç†- DOMAIN-SUFFIX,126.com,DIRECT#domain-keywordæ˜¯å…³é”®è¯åŒ¹é…- DOMAIN-KEYWORD,baidu,DIRECT#ipåŒ¹é…- IP-CIDR,127.0.0.0/8,DIRECT ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:3:3","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["tool"],"content":"å‚è€ƒ https://github.com/Hackl0us/SS-Rule-Snippet/blob/master/LAZY_RULES/clash.yaml https://github.com/nondanee/UnblockNeteaseMusic https://github.com/yichengchen/clashX ","date":"2020-02-18","objectID":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/:4:0","tags":["clash"],"title":"Macä¸‹clashæ•™ç¨‹","uri":"/2020.2.18_mac%E4%B8%8Bclash%E6%95%99%E7%A8%8B/"},{"categories":["code"],"content":"é—®é¢˜ ä»Šå¤©æˆ‘åœ¨å†™ä»£ç çš„æ—¶å€™é‡åˆ°äº†æ ‡é¢˜æ‰€è¯´çš„é—®é¢˜ï¼Œæˆ‘ç”¨googleæœç´¢äº†ä¸‹ä¹Ÿæ²¡æœ‰æ‰¾åˆ°æƒ³è¦çš„ç­”æ¡ˆã€‚åæ¥é€šè¿‡å‡ ä¸ªæµ‹è¯•ç”¨ä¾‹è¯•äº†ä¸‹è¿™ä¸ªå‘ç°é—®é¢˜æœ‰ç‚¹æ„æ€ ","date":"2019-12-04","objectID":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/:1:0","tags":["golang"],"title":"å½“golangå¤šä¸ªå­—æ®µçš„json tagç›¸åŒæ—¶ä¼šæ€ä¹ˆæ ·?","uri":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/"},{"categories":["code"],"content":"æƒ…å†µ1 éƒ½æ˜¯æ™®é€šå­—æ®µ type sameTag struct { A string `json:\"a\"` B string `json:\"a\"` Other string `json:\"other\"` } func TestSameJson(t *testing.T) { tag := sameTag{\"a\", \"b\", \"other filed\"} bytes, e := json.Marshal(tag) fmt.Println(string(bytes)) fmt.Println(e) } è¾“å‡ºç»“æœ: {\"other\":\"other filed\"} \u003cnil\u003e ä¸Šé¢ä»£ç çš„Aã€Bå­—æ®µçš„tagç›¸åŒã€‚è¯¥structåœ¨åºåˆ—åŒ–ååªä¿ç•™äº†otherå­—æ®µï¼ŒABå­—æ®µå› ä¸ºå†²çªç›´æ¥æ¶ˆå¤±äº† ","date":"2019-12-04","objectID":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/:2:0","tags":["golang"],"title":"å½“golangå¤šä¸ªå­—æ®µçš„json tagç›¸åŒæ—¶ä¼šæ€ä¹ˆæ ·?","uri":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/"},{"categories":["code"],"content":"æƒ…å†µ2 æ™®é€šå­—æ®µå’ŒåŒ¿åå­—æ®µ type innerStruct struct { A string `json:\"a\"` } type sameTag struct { innerStruct B string `json:\"a\"` Other string `json:\"other\"` } func TestSameJson(t *testing.T) { tag := sameTag{innerStruct{\"inner\"}, \"outter\", \"other filed\"} bytes, e := json.Marshal(tag) fmt.Println(string(bytes)) fmt.Println(e) } è¾“å‡ºç»“æœï¼š {\"a\":\"outter\",\"other\":\"other filed\"} \u003cnil\u003e è¿™æ¬¡çš„ABçš„tagéƒ½ç›¸åŒï¼Œä½†æ˜¯åºåˆ—åŒ–ç»“æœé‡‡ç”¨äº†Bå­—æ®µã€‚å› ä¸ºBå­—æ®µçš„ä¼˜å…ˆçº§æ¯”è¾ƒé«˜ï¼Œä¸€èˆ¬å­—æ®µçš„ä¼˜å…ˆçº§æ¯”åŒ¿åå­—æ®µé«˜ ","date":"2019-12-04","objectID":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/:3:0","tags":["golang"],"title":"å½“golangå¤šä¸ªå­—æ®µçš„json tagç›¸åŒæ—¶ä¼šæ€ä¹ˆæ ·?","uri":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/"},{"categories":["code"],"content":"æƒ…å†µ3 éƒ½æ˜¯åŒ¿åå­—æ®µ type innerA struct { A string `json:\"a\"` } type innerB struct { B string `json:\"a\"` } type sameTag struct { innerA innerB Other string `json:\"other\"` } func TestSameJson(t *testing.T) { tag := sameTag{innerA{\"innerA\"}, innerB{\"innerB\"}, \"other filed\"} bytes, e := json.Marshal(tag) fmt.Println(string(bytes)) fmt.Println(e) } è¾“å‡ºç»“æœ: {\"other\":\"other filed\"} \u003cnil\u003e è¿™æ¬¡è¾“å‡ºå’Œæƒ…å†µ1ä¸€æ ·ï¼Œè¿˜æ˜¯ä¼˜å…ˆçº§çš„é—®é¢˜ã€‚innerAå’ŒinnerBéƒ½æ˜¯åŒ¿åå­—æ®µæ‰€ä»¥ABå­—æ®µçš„ä¼˜å…ˆçº§ä¸€æ ·ï¼Œè¿™æ ·å°±å†²çªäº†ï¼Œåºåˆ—åŒ–å¿½ç•¥è¿™ä¸¤ä¸ªå­—æ®µã€‚ ","date":"2019-12-04","objectID":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/:4:0","tags":["golang"],"title":"å½“golangå¤šä¸ªå­—æ®µçš„json tagç›¸åŒæ—¶ä¼šæ€ä¹ˆæ ·?","uri":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/"},{"categories":["code"],"content":"æ€»ç»“ æ€»çš„æ¥è¯´å°±æ˜¯å› ä¸ºå­—æ®µä¼˜å…ˆçº§çš„åŸå› ï¼Œä¼šé‡‡ç”¨ä¼˜å…ˆçº§é«˜çš„å­—æ®µã€‚å½“ä¼˜å…ˆçº§ç›¸åŒæ—¶è·³è¿‡è¿™äº›ç›¸åŒçš„å­—æ®µã€‚ è¿™æ®µé€»è¾‘æ—¶jsonçš„æºç ä¸­ä¹Ÿæœ‰ä½“ç° encode.goæ–‡ä»¶ä¸­çš„dominantFieldæ–¹æ³•å°±æ˜¯æ¥åˆ¤æ–­å­˜ä¸å­˜åœ¨ä¼˜å…ˆçº§ç›¸åŒçš„å­—æ®µ dominantField looks through the fields, all of which are known to have the same name, to find the single field that dominates the others using Go's embedding rules, modified by the presence of JSON tags. If there are multiple top-level fields, the boolean will be false: This condition is an error in Go and we skip all the fields. ","date":"2019-12-04","objectID":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/:5:0","tags":["golang"],"title":"å½“golangå¤šä¸ªå­—æ®µçš„json tagç›¸åŒæ—¶ä¼šæ€ä¹ˆæ ·?","uri":"/2019.12.04_%E5%BD%93golang%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%E7%9A%84json-tag%E7%9B%B8%E5%90%8C%E6%97%B6%E4%BC%9A%E6%80%8E%E4%B9%88%E6%A0%B7/"},{"categories":["ç¼–ç¨‹"],"content":"golangçš„MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç¼–ç¨‹"],"content":"é—®é¢˜ ä»Šå¤©æˆ‘åœ¨golangè‡ªå®šä¹‰jsonçš„åºåˆ—åŒ–æ—¶ï¼Œå‘ç°æˆ‘çš„structå®ç°MarshalJSON()ç«Ÿç„¶æ²¡æœ‰æ•ˆæœï¼Œè¿˜æ˜¯æŒ‰ç…§é»˜è®¤çš„æ–¹å¼æ¥åºåˆ—åŒ–ã€‚è¿™è®©æˆ‘éå¸¸éƒé—·â˜¹ï¼Œåæ¥æˆ‘æŸ¥æ‰¾äº†ä¸€äº›èµ„æ–™å‘ç°è¿™ä¸ªé—®é¢˜ä¸ç®€å•ã€‚ã€‚ ä¸‹é¢æ˜¯æˆ‘æœ‰é—®é¢˜çš„ä»£ç  type str string func (s *str) MarshalJSON() (data []byte, err error) { return json.Marshal(\"bbb\") } func TestStr(t *testing.T) { var s str = \"aaa\" bytes, _ := json.Marshal(s) fmt.Println(string(bytes)) //æˆ‘æƒ³è®©ä»–åºåˆ—åŒ–ä¸º\"bbb\"ä½†æ˜¯è¾“å‡ºç»“æœè¿˜æ˜¯\"aaa\" } ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/:1:0","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç¼–ç¨‹"],"content":"pointer receiver å’Œvalue receiver type T struct{} func (t *T) pointerMethod() { } // pointer receiver func (t T) valueMethod() { } // value receiver ä¸Šé¢ä¸¤ä¸ªæ–¹æ³•åˆ†åˆ«å°±æ˜¯pointer receiverå’Œvalue receiver ç”±äºgolangæ²¡æœ‰é¢å‘å¯¹è±¡é‚£ä¸€å¥—ä¸œè¥¿ï¼Œä¸Šé¢çš„ä¸¤è¡Œä»£ç å¯ä»¥è§†ä¸ºä¸‹é¢çš„å½¢å¼ func pointerMethod(t *T) { } func valueMethod(t T) { } æ‰€ä»¥åœ¨golangä¸­valueå˜é‡åªèƒ½è°ƒç”¨value receiverçš„æ–¹æ³•ï¼Œpointeråªèƒ½è°ƒç”¨pointer receiverçš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼š var t1 T t1.valueMethod()//æ­£ç¡® t1.pointerMethod()//é”™è¯¯? var t2 *T t2.valueMethod()//é”™è¯¯ï¼Ÿ t2.pointerMethod()//æ­£ç¡® å…¶å®æˆ‘ä»¬å®é™…å¯ä»¥ç›¸äº’è°ƒç”¨çš„ var t1 T t1.valueMethod()//æ­£ç¡® t1.pointerMethod()//æ­£ç¡® var t2 *T t2.valueMethod()//æ­£ç¡® t2.pointerMethod()//æ­£ç¡® å› ä¸ºgolangçš„åº•å±‚å¸®æˆ‘ä»¬åšäº†ä¸€å±‚éšå¼è½¬æ¢ t1.pointerMethod() == (\u0026t1).pointerMethod() t2.valueMethod()==(*t2).valueMethod() æ€»çš„æ¥è¯´ Tå¯ä»¥è°ƒç”¨value receiverå’Œpointer receiveræ–¹æ³• *Tå¦‚æœæ˜¯å¯ä»¥å–åœ°å€(addressable)çš„å˜é‡ï¼Œä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨value receiverå’Œpointer receiveræ–¹æ³• å¦‚æœ*Tæ˜¯ä¸å¯å»åœ°å€çš„å˜é‡ï¼Œé‚£åªèƒ½è°ƒç”¨pointer receiveræ–¹æ³• å…³äºä»€ä¹ˆæ˜¯å¯ä»¥å»åœ°å€çš„å˜é‡ï¼Œä»€ä¹ˆæ˜¯ä¸å¯ä»¥å–åœ°å€ã€‚å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« é“¾æ¥ ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/:2:0","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç¼–ç¨‹"],"content":"Interfaceçš„value receiver å’Œpointer receiver åœ¨è®¨è®ºinterfaceçš„receiverä¹‹å‰ï¼Œå…ˆçœ‹ä¸‹interfaceåœ¨ä½¿ç”¨ä¸­çš„ä¸€äº›é—®é¢˜ã€‚ type S struct { } func (s *S) pointerMethod() { } func (s S) valueMethod() { } type I interface { pointerMethod() valueMethod() } func TestInterface(t *testing.T) { value := S{} pointer := \u0026S{} var i I i = pointer //å¯ä»¥èµ‹å€¼ i=value //ç¼–è¯‘é”™è¯¯ // cannot use value (type S) as type I in assignment: //S does not implement I (pointerMethod method has pointer receiver) } ä¸Šé¢çš„ä»£ç ä¸ºä»€ä¹ˆpointerå¯ä»¥èµ‹å€¼ç»™iï¼Œè€Œvalueå´ä¸è¡Œï¼Ÿ å› ä¸ºpointerå˜é‡å¯ä»¥é€šè¿‡*pointeræ¥è°ƒç”¨value receiverä¹Ÿå°±æ˜¯valueMethod ä½†æ˜¯valueå˜é‡å°±ä¸è¡Œã€‚ å› ä¸ºå­˜å‚¨åœ¨interfaceé‡Œçš„å€¼æ˜¯ä¸èƒ½å–åœ°å€çš„ï¼Œæ‰€ä»¥è°ƒç”¨ä¸äº†pointerMethod æ€»çš„æ¥è¯´å½“ä¸€ä¸ªæ¥å£Iæœ‰value receiverå’Œpointer receiveræ—¶ï¼ŒæŒ‡é’ˆå˜é‡ï¼ˆ*Tï¼‰æ˜¯æ»¡è¶³è¿™ä¸ªæ¥å£çš„ ä½†æ˜¯å€¼ç±»å‹çš„å˜é‡(T)å°±ä¸è¡Œï¼Œå› ä¸ºTèµ‹å€¼ç»™Iåï¼Œä¸èƒ½å–åœ°å€ ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/:3:0","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç¼–ç¨‹"],"content":"è§£å†³é—®é¢˜ ç»è¿‡ä¸Šé¢çš„è§£é‡Šï¼Œæˆ‘ä»¬ç°åœ¨è‡ªç„¶çš„æ‰¾åˆ°äº†è§£å†³æˆ‘ä¸€å¼€å§‹é‡åˆ°çš„é—®é¢˜çš„æ–¹æ³• è¿™é‡Œæœ‰ä¸¤ç§è§£å†³æ–¹æ³• æŠŠsçš„ç±»å‹æ”¹ä¸ºæŒ‡é’ˆ type str string func (s *str) MarshalJSON() (data []byte, err error) { return json.Marshal(\"bbb\") } func TestStr(t *testing.T) { temp := \"aaa\" var s *str = (*str)(\u0026temp) //æ”¹ä¸ºæŒ‡é’ˆ bytes, _ := json.Marshal(s) fmt.Println(string(bytes)) } ä»pointer receiveræ”¹ä¸ºvalue receiver type str string func (s str) MarshalJSON() (data []byte, err error) { //æŠŠ * å»æ‰ return json.Marshal(\"bbb\") } func TestStr(t *testing.T) { var s str = \"aaa\" bytes, _ := json.Marshal(s) fmt.Println(string(bytes)) } ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/:4:0","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç¼–ç¨‹"],"content":"å‚è€ƒ https://stackoverflow.com/questions/33587227/golang-method-sets-pointer-vs-value-receiver https://stackoverflow.com/questions/21390979/custom-marshaljson-never-gets-called-in-go http://shanks.leanote.com/post/Untitled-55ca439338f41148cd000759-17 https://sanyuesha.com/2017/07/22/how-to-understand-go-interface/ https://colobu.com/2018/02/27/go-addressable/ https://tonybai.com/2015/09/17/7-things-you-may-not-pay-attation-to-in-go/ ","date":"2019-11-08","objectID":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/:5:0","tags":["golang"],"title":"MarshalJSONæ²¡æœ‰è°ƒç”¨ã€æ— æ•ˆï¼Ÿ","uri":"/2019.11.08_marshaljson%E6%B2%A1%E6%9C%89%E8%B0%83%E7%94%A8%E6%97%A0%E6%95%88/"},{"categories":["ç”Ÿæ´»"],"content":"ä¸Šæµ·æŠ¤ç…§åŠç†æµç¨‹åˆ†äº«","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"å‰è¨€ æˆ‘åŠç†æŠ¤ç…§å¹¶ä¸æ˜¯å› ä¸ºç›®å‰æœ‰å‡ºè¿‡å›½çš„éœ€æ±‚ã€‚è€Œæ˜¯å›½å¤–çš„ä¸€äº›å¹³å°çš„èº«ä»½è®¤è¯éœ€è¦ä¸Šä¼ æŠ¤ç…§ï¼Œä¸­å›½å±…æ°‘èº«ä»½è¯åœ¨å›½å¤–å¹³å°çš„è®¤å¯åº¦æ˜¯æ²¡æœ‰æŠ¤ç…§é«˜çš„ã€‚æ‰€ä»¥ç°åœ¨é—²ç€æ²¡äº‹åŠä¸ªæŠ¤ç…§ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:1:0","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"å¿…è¦æ¡ä»¶å’Œè¯ä»¶ åœ¨ä¸Šæµ·åŠç†æŠ¤ç…§è¦æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶å…¶ä¸­ä¹‹ä¸€ ä¸Šæµ·æˆ·ç± ä¸Šæµ·å±…ä½è¯ åœ¨ä¸Šæµ·è¿ç»­ç¼´çº³ä¸€å¹´ç¤¾ä¿ æˆ‘å°±æ˜¯ä»¥ç¬¬ä¸‰ä¸ªæ¡ä»¶æ¥åŠç†çš„æŠ¤ç…§ è¯ä»¶åªéœ€è¦èº«ä»½è¯ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:2:0","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"åŠç†æµç¨‹ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:0","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"é¢„çº¦ é¢„çº¦æœ‰ä¸¤ç§æ–¹å¼ä¸€ç§æ˜¯æå‰ç½‘ä¸Šé¢„çº¦(ç‚¹å‡»è¿›å…¥é¢„çº¦ç½‘å€)ã€‚ç¬¬äºŒç§æ˜¯åˆ°ç°åœºæ‰«ç é¢„çº¦ æˆ‘æ˜¯æå‰åœ¨ç½‘ä¸Šé¢„çº¦çš„ é¢„çº¦çš„åœ°å€æ˜¯è‡ªè´¸åŒºçš„æ—¥äº¬è·¯38å·ï¼Œæ—¶é—´æ®µä¸Šåˆ9ï¼š00-10ï¼š00 ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:1","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"åŠç†å‰ æ—¥äº¬è·¯çš„åŠç†ç‚¹æ˜¯åœ¨äºŒæ¥¼ï¼Œç”±å°é˜¶ä¸Šå»ï¼Œè¿›å…¥å¤§é—¨è¿›å»å°±æ˜¯åŠç†å¤§å… åŠå…¬æ—¶é—´ åŠç†å¤§å…å†… ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:2","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"æ‹ç…§ å¦‚æœæå‰é¢„çº¦äº†ï¼Œå¯ä»¥ç›´æ¥å»æ‹ç…§ï¼Œå¦‚æœæ²¡é¢„çº¦è¿‡è¦åˆ°å‰å°æ‰«ç é¢„çº¦ã€‚ å¦‚æœåªæ˜¯åŠç†æŠ¤ç…§ï¼Œæ‹ç…§æ˜¯å…è´¹çš„ã€‚å¦‚æœè¿˜è¦åŠç†ç­¾è¯ï¼Œéœ€è¦å¦ä»˜30å…ƒæ‰“å°ç…§ç‰‡ï¼Œæ”¯æŒæ”¯ä»˜å®å¾®ä¿¡ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:3","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"æ‰“å°ç”³è¯·è¡¨ æ‹å®Œç…§ç‰‡åï¼Œå»æ—è¾¹çš„æœºå™¨æ‰“å°ç”³è¯·è¡¨ï¼Œè¿™é‡Œéœ€è¦èº«ä»½è¯ã€‚ æ‹¿åˆ°ç”³è¯·è¡¨åæ‰¾å‰å°å–å·æ’é˜Ÿã€‚è¿™é‡Œå¯ä»¥é€‰æ‹©é‚®å¯„è¯ä»¶ï¼Œé‚®è´¹æ˜¯åˆ°ä»˜ã€‚ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:4","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"åŠç†ä»˜æ¬¾ æ‹¿åˆ°å·åï¼Œå°±å¯ä»¥åç€ä¼‘æ¯äº†ã€‚å«åˆ°ä½ æ—¶å»å¯¹åº”çš„çª—å£åŠç†å°±è¡Œäº†ã€‚ åŠç†è¿‡ç¨‹å°±æ˜¯æ ¸å¯¹ä¿¡æ¯ï¼Œå½•å…¥æŒ‡çº¹ç­¾å­—è¿™å‡ é¡¹ï¼Œé€Ÿåº¦å¾ˆå¿«ã€‚ æœ€åå°±æ˜¯ä»˜è´¹äº†ï¼ŒåŠè¯çš„è´¹ç”¨120å…ƒï¼Œæ”¯æŒç°é‡‘ã€æ”¯ä»˜åŒ…å¾®ä¿¡ã€é“¶è¡Œå¡ã€ä¿¡ç”¨å¡ã€‚ æœ€åæŠŠç”³è¯·è¡¨ï¼Œå¿«é€’å•å·äº¤ç»™å‰å°ï¼Œæµç¨‹ç»“æŸã€‚ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:3:5","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":["ç”Ÿæ´»"],"content":"æ€»ç»“ ä»æˆ‘è¿›å…¥åŠç†å¤§å…ï¼Œåˆ°åŠç†å®Œæˆèµ°å‡ºå¤§å…ï¼Œå…¨ç¨‹èŠ±è´¹äº†æˆ‘22åˆ†é’ŸğŸ™‚å’Œ120å…ƒå’Œå°‘è®¸çš„é‚®è´¹ æ•´ä¸ªæµç¨‹éå¸¸çš„å¿«æ·æ–¹ä¾¿ğŸ‘ ","date":"2019-11-03","objectID":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/:4:0","tags":["ç”Ÿæ´»"],"title":"ä¸Šæµ·åŠç†æŠ¤ç…§æµç¨‹","uri":"/2019.11.03_%E4%B8%8A%E6%B5%B7%E5%8A%9E%E7%90%86%E6%8A%A4%E7%85%A7%E6%B5%81%E7%A8%8B/"},{"categories":null,"content":"Github Actionsæ˜¯githubæçš„ä¸€ä¸ªæŒç»­é›†æˆæœåŠ¡,ç°åœ¨è¿˜åœ¨æµ‹è¯•ä¸­,å¦‚æœæƒ³è¦ä½¿ç”¨éœ€è¦åˆ°å®˜ç½‘å»ç”³è¯·. ç°åœ¨æˆ‘æƒ³ä½¿ç”¨github actionså®ç°vue-element-adminåšçš„ä¸€ä¸ªç®¡ç†åå°çš„è‡ªåŠ¨æ„å»ºå‘å¸ƒåˆ°ç”Ÿäº§æœåŠ¡å™¨çš„ä¸€ç³»åˆ—è¿‡ç¨‹ ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:0:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"æ–°å»ºgithub workflow è¿›å…¥githubä»“åº“çš„ä¸»é¡µç‚¹å‡»actionså°±å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„workflow æ–°å»ºæ–‡ä»¶çš„è·¯å¾„åœ¨ä»“åº“æ ¹ç›®å½•çš„./github/workflows/ æˆ‘ä¹‹å‰è¯¯æ“ä½œä¸çŸ¥é“ä¸ºä»€ä¹ˆæ–°å»ºåœ¨ä»“åº“çš„æ ¹ç›®å½• ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:1:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"å­—æ®µè¯´æ˜ name å­—æ®µæ˜¯ workflow çš„åç§°ã€‚å¦‚æœçœç•¥è¯¥å­—æ®µï¼Œé»˜è®¤ä¸ºå½“å‰ workflow çš„æ–‡ä»¶å name:CI on å­—æ®µæŒ‡å®šè§¦å‘ workflow çš„æ¡ä»¶ //pushæ—¶è§¦å‘on:[push]//pushå’Œpullæ—¶è§¦å‘on:[push, pull_request]//åªåœ¨masteråˆ†æ”¯pushæ—¶è§¦å‘on:push:branches:- master jobs è¡¨ç¤ºè¦æ‰§è¡Œçš„ä¸€é¡¹æˆ–å¤šé¡¹ä»»åŠ¡ jobs:my_job1:xxxxxxxxxxxmy_job2:xxxxxxxx my_job1å’Œmy_job2ç§°ä¸ºjob_id jobs.\u003cjob_id\u003e.runs-on å­—æ®µæŒ‡å®šè¿è¡Œæ‰€éœ€è¦çš„è™šæ‹Ÿæœºç¯å¢ƒã€‚å®ƒæ˜¯å¿…å¡«å­—æ®µã€‚ç›®å‰å¯ç”¨çš„è™šæ‹Ÿæœºå¦‚ä¸‹ ubuntu-latestï¼Œubuntu-18.04æˆ–ubuntu-16.04 windows-latestï¼Œwindows-2019æˆ–windows-2016 macOS-latestæˆ–macOS-10.14 jobs.\u003cjob_id\u003e.steps å­—æ®µæŒ‡å®šæ¯ä¸ª Job çš„è¿è¡Œæ­¥éª¤ï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæ­¥éª¤ã€‚æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥æŒ‡å®šä»¥ä¸‹å­—æ®µ steps.nameï¼šæ­¥éª¤åç§° steps.runï¼šè¯¥æ­¥éª¤è¿è¡Œçš„linuxå‘½ä»¤ å¦‚pwd ls-l ç­‰ steps.uses :è¯¥æ­¥éª¤ä½¿ç”¨actions marketä¸­çš„åˆ«äººå†™å¥½çš„action steps.uses.with:è¯¥æ­¥éª¤æ˜¯å¡«å…¥åˆ«äººå®šä¹‰å¥½çš„å‚æ•°,æ¯”å¦‚åœ¨hellow_actionä¸­å®šä¹‰å¥½äº†ä¸‰ä¸ªå‚æ•°( first_name, middle_name, and last_name ) jobs:my_first_job:steps:- name:My first stepuses:actions/hello_world@masterwith:first_name:Monamiddle_name:Thelast_name:Octocat steps.uses.envå’Œwithç±»ä¼¼ ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:2:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"æˆ‘çš„action ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:3:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"ä¸‹è½½é¡¹ç›®ä»£ç  uses:actions/checkout@master @masteræ˜¯æŒ‡å®šmasterçš„ä»£ç  å¦‚æœæƒ³è¦ä¸‹è½½æŸä¸ªtagæˆ–æŸä¸ªcommitçš„ä»£ç ,å¦‚ä¸‹ actions/checkout@74bc508# æŒ‡å‘ä¸€ä¸ª commitactions/checkout@v1.0 # æŒ‡å‘ä¸€ä¸ªæ ‡ç­¾actions/checkout@master # æŒ‡å‘ä¸€ä¸ªåˆ†æ”¯ ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:3:1","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"npm build - name:npm install, build, and testrun:|npm install npm run build:prod --if-presentenv:CI:true ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:3:2","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"sshåˆ°ç”Ÿäº§æœåŠ¡å™¨å¤‡ä»½ç°åœ¨æ­£åœ¨è¿è¡Œçš„é™æ€ç½‘é¡µ è¿™ä¸€éƒ¨ä½¿ç”¨äº†appleboyçš„ssh-action,è¿™ä¸ªactionå°±æ˜¯ä»action marketä¸­æ‰¾åˆ°çš„ å…·ä½“æ–‡æ¡£åœ¨è¿™ name:backup admin-webuses:appleboy/ssh-action@masterwith:host:${{ secrets.SERVER_IP }}username:rootpassword:${{ secrets.FTP_PASSWORD }}port:22script:|cp -r /root/glass/admin-web /root/glass/admin-web-old å¦‚æœactionsçš„é…ç½®æ–‡ä»¶é‡Œé‡è¦çš„ä¿¡æ¯,æ¯”å¦‚å¯†ç æˆ–å¯†é’¥å¯ä»¥ä½¿ç”¨ç§˜å¯†ç¯å¢ƒå˜é‡æ¥æ›¿ä»£${{secrets.xxxx}} ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:3:3","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"æŠŠdistéƒ¨ç½²åˆ°ç”Ÿäº§æœåŠ¡å™¨ vue-element-admin buildä¹‹åçš„é™æ€æ–‡ä»¶åœ¨æ ¹ç›®å½•çš„distæ–‡ä»¶å¤¹,æ‰€ä»¥æˆ‘è¦æŠŠdistæ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶éƒ½ä¸Šç©¿åˆ°ç”Ÿäº§æœåŠ¡å™¨é‡Œ è¿™é‡Œä½¿ç”¨äº†SamKirkland/FTP-Deploy-Action@2.0.0 æ–‡æ¡£ uses:SamKirkland/FTP-Deploy-Action@2.0.0env:FTP_SERVER:${{ secrets.SERVER_IP }}FTP_USERNAME:rootFTP_PASSWORD:${{ secrets.FTP_PASSWORD }}METHOD:sftpLOCAL_DIR:dist #è¦ä¸Šä¼ çš„ç›®å½•REMOTE_DIR:/root/glass/admin-web #ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„ç›®å½•ARGS:--delete ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:3:4","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"å…¨éƒ¨actionæ–‡ä»¶ name:Node CIon:push:branches:- masterjobs:build:runs-on:ubuntu-lateststeps:- uses:actions/checkout@master- name:Use Node.js 12.xuses:actions/setup-node@v1with:node-version:'12.x'- name:npm install, build, and testrun:|npm install npm run build:prod --if-presentenv:CI:true- name:backup admin-webuses:appleboy/ssh-action@masterwith:host:${{ secrets.SERVER_IP }}username:rootpassword:${{ secrets.FTP_PASSWORD }}port:22script:|cp -r /root/glass/admin-web /root/glass/admin-web-old- name:deploy to serveruses:SamKirkland/FTP-Deploy-Action@2.0.0env:FTP_SERVER:${{ secrets.SERVER_IP }}FTP_USERNAME:rootFTP_PASSWORD:${{ secrets.FTP_PASSWORD }}METHOD:sftpLOCAL_DIR:distREMOTE_DIR:/root/glass/admin-webARGS:--delete è¿è¡Œç»“æœ ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:4:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"å‚è€ƒ https://help.github.com/en/github/automating-your-workflow-with-github-actions/virtual-environments-for-github-actions https://github.com/SamKirkland/FTP-Deploy-Action https://github.com/appleboy/ssh-action ","date":"2019-10-21","objectID":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/:5:0","tags":["vue","git","å‰ç«¯"],"title":"å½“github actioné‡åˆ°element-ui-admin","uri":"/2019.10.21_%E5%BD%93github-action%E9%81%87%E5%88%B0element-ui-admin/"},{"categories":null,"content":"zipå‘½ä»¤ ä½¿ç”¨unzipçš„æ—¶å€™æœ‰æ—¶å€™æƒ³æŠŠæ–‡ä»¶è§£å‹åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœç›´æ¥å†™ä¸€ä¸ªæ–°ç›®å½•ä¼šæŠ¥é”™ åœ¨è¦è§£å‹çš„ç›®çš„åœ°çš„å‰é¢åŠ ä¸ªå‚æ•°ï¼dï¼Œå°±èƒ½æ–°å»ºä¸€ä¸ªä¸å­˜çš„ç›®å½• ","date":"2019-10-13","objectID":"/2019.10.13_linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:1","tags":["linux"],"title":"Linuxå¸¸ç”¨å‘½ä»¤","uri":"/2019.10.13_linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"},{"categories":null,"content":"mysqlç›¸å…³å‘½ä»¤ è‡ªåŠ¨è¡¥å…¨ mysqlçš„å‘½ä»¤ä¹Ÿæ˜¯æœ‰è‡ªåŠ¨è¡¥å…¨çš„ï¼éœ€è¦çš„å‚æ•°å¦‚ä¸‹ mysql -u root -p --auto-rehash å¼€å¯åèƒ½è‡ªåŠ¨è¡¥å…¨äº† ä½†æ˜¯è¿™ä¸ªåªèƒ½è¡¥æ•°æ®åå’Œè¡¨åä¹‹ç±»çš„ï¼Œä¸èƒ½è¡¥å…¨show databases ä¹‹ç±»çš„å‘½ä»¤ï¼Œå¾ˆè›‹ç–¼ è¿æ¥è¿œç¨‹mysql -hå‚æ•°å°±æ˜¯è¿œç¨‹åœ°å€ mysql -h 192.168.1.221 -u root -p ","date":"2019-10-13","objectID":"/2019.10.13_linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/:0:2","tags":["linux"],"title":"Linuxå¸¸ç”¨å‘½ä»¤","uri":"/2019.10.13_linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"},{"categories":null,"content":"é—®é¢˜ å¦‚æœæƒ³è¦åœ¨go buildç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­æ³¨å…¥ç¼–è¯‘æ—¶é—´ï¼Œgit hashç­‰ä¿¡æ¯ã€‚å¯ä»¥åœ¨ç¼–è¯‘çš„æ—¶å€™ä½¿ç”¨-ldflags -Xå‚æ•°æ¥æ³¨å…¥å˜é‡ -ldfflags -X å¯ä»¥åœ¨go install ã€go buildã€go run ã€go testä¸­ä½¿ç”¨ go build -ldflags â€œ-X ' packageName.varName=cmd ' â€œ ","date":"2019-08-26","objectID":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/:1:0","tags":null,"title":"golang ldfalgsçš„å°æŠ€å·§","uri":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":null,"content":"æ ·ä¾‹ package main import \"fmt\" var ( time = \"not set\" git = \"not set\" ) func main() { fmt.Println(\"build time:\", time) fmt.Println(\"git log:\", git) } æƒ³è¦åœ¨buildçš„æ—¶å€™æ”¹å˜timeå’Œgitçš„å€¼ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š powershell(cmdæœ‰é—®é¢˜): go build -ldflags \"-X 'main.buildTime=$(date)' -X 'main.gitHash=$(git log --pretty=format:\"%h\" -1)'\" main.go linux: go build -ldflags \"-X 'main.time=$(date -u --rfc-3339=seconds)' -X 'main.git=$(git log --pretty=format:\"%h\" -1)'\" main.go è¿è¡Œç»“æœ: build date: 2019-09-12 06:57:45+00:00 git hash: e1ac7a6 ","date":"2019-08-26","objectID":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/:2:0","tags":null,"title":"golang ldfalgsçš„å°æŠ€å·§","uri":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":null,"content":"æ³¨æ„ åªèƒ½ç»™stringèµ‹å€¼,ä¸èƒ½æ˜¯bool,int åªèƒ½æ˜¯å˜é‡ï¼Œä¸èƒ½æ˜¯å¸¸é‡ -X importpath.name=val, å…¶ä¸­importpathæ˜¯å˜é‡æ‰€åœ¨åŒ…çš„çš„è·¯å¾„ï¼Œ nameæ˜¯åŒ…ä¸­å®šä¹‰çš„å˜é‡ï¼Œ val æ˜¯éœ€è¦åœ¨ç¼–è¯‘æ—¶è®¾ç½®çš„å˜é‡çš„å€¼(string) å¦‚æœvalæ˜¯å‘½ä»¤çš„ç»“æœï¼Œå‘½ä»¤ä¸­å¯èƒ½æœ‰ç©ºæ ¼ä¹‹ç±»çš„ç‰¹æ®Šç¬¦å·ï¼Œå»ºè®® importpath.nmae=val ç”¨å•å¼•å·æ‹¬èµ·æ¥,å¦‚ï¼š`importpath.nmae=val` ","date":"2019-08-26","objectID":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/:3:0","tags":null,"title":"golang ldfalgsçš„å°æŠ€å·§","uri":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":null,"content":"å‚è€ƒ https://stackoverflow.com/questions/47509272/how-to-set-package-variable-using-ldflags-x-in-golang-build https://2young.2simple.top/article/golang/golang%E5%9C%A8%E7%BC%96%E8%AF%91%E6%97%B6%E4%BD%BF%E7%94%A8ldflags%E5%8A%A8%E6%80%81%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC.html ","date":"2019-08-26","objectID":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/:4:0","tags":null,"title":"golang ldfalgsçš„å°æŠ€å·§","uri":"/2019.9.12_golang-ldfalgs%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/"},{"categories":null,"content":"é—®é¢˜ Golangçš„æ–¹æ³•æ¥æ”¶è€…å°±æ˜¯åœ¨å‡½æ•°åå‰çš„æ‹¬å·å†…çš„ä¸œè¥¿ å¦‚ func (self Car) run() // (self car)å°±æ˜¯æ–¹æ³•æ¥æ”¶è€… åœ¨JetBrainsç³»ç±»çš„å¼€å‘å·¥å…·ä¸­ï¼ˆIntelliJã€Golandï¼‰å¦‚æœæ–¹æ³•æ¥æ”¶è€…åå­—æ˜¯self me thisç±»ä¼¼çš„è¯ï¼ŒIDEä¼šæç¤ºReceiver has generic nameä¿¡æ¯ å¦‚ä¸‹å›¾æ‰€ç¤º Goä¸­çš„å‡½æ•° åœ¨Goä¸­ï¼Œæ— è®ºæ˜¯æ–¹æ³•è¿˜æ˜¯å‡½æ•°éƒ½å¯ä»¥æŠŠä»–ä½œä¸ºä¸€ä¸ªæ™®é€šçš„å‡½æ•°æ¥è°ƒç”¨ Demo: type Car struct { i int } func (c Car) run() { fmt.Println(\"my receiver is:\", c.i) } func TestSelf(t *testing.T) { a := Car{1} a.run() Car.run(Car{22}) } è¿è¡Œç»“æœå¦‚ä¸‹ï¼š my receiver is: 1 my receiver is: 22 Goçš„æ–¹æ³•åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œæœ¬è´¨è¿˜æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ¥æ”¶è€…çš„æ™®é€šå‡½æ•° è§£é‡Š åœ¨å…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­this self meè¿™äº›å­—æ®µéƒ½æœ‰å…·ä½“çš„å«ä¹‰ï¼Œæ¯”å¦‚å¯ä»¥è®¿é—®è‡ªå·±çš„ç§æœ‰æ–¹æ³•æˆ–å­—æ®µæˆ–è€…æœ‰å…¶ä»–ç‰¹æ®Šçš„å«ä¹‰ã€‚ ä½†æ˜¯åœ¨goä¸­æœ€å¥½ä¸ç”¨ä½¿ç”¨è¿™äº›è¯ï¼Œå› ä¸ºæ–¹æ³•æ¥æ”¶è€…åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‚æ•°è€Œï¼Œèµ·ä¸åˆ°è¿™äº›è¯å­—é¢ä¸Šçš„å«ä¹‰ goå®˜æ–¹çš„ä»£ç è§„èŒƒä¹Ÿæåˆ°äº†è¿™ä¸€ç‚¹ The name of a methodâ€™s receiver should be a reflection of its identity; often a one or two letter abbreviation of its type suffices (such as â€œcâ€ or â€œclâ€ for â€œClientâ€). Donâ€™t use generic names such as â€œmeâ€, â€œthisâ€ or â€œselfâ€, identifiers typical of object-oriented languages that gives the method a special meaning. In Go, the receiver of a method is just another parameter and therefore, should be named accordingly. The name need not be as descriptive as that of a method argument, as its role is obvious and serves no documentary purpose. It can be very short as it will appear on almost every line of every method of the type; familiarity admits brevity. Be consistent, too: if you call the receiver â€œcâ€ in one method, donâ€™t call it â€œclâ€ in another. å¦‚æœæƒ³å…³é—­æ‰è¿™ä¸ªæç¤ºå¯ä»¥åœ¨Setting-\u003eEditor-\u003eInspections-\u003eGo-\u003eCode style issues ä¸­æŠŠReceiver has generic nameè¿™ä¸€é¡¹å–æ¶ˆ å‚è€ƒ https://stackoverflow.com/questions/23482068/in-go-is-naming-the-receiver-variable-self-misleading-or-good-practice https://stackoverflow.com/questions/38025743/go-why-shouldnt-use-this-for-method-receiver-name https://github.com/golang/go/wiki/CodeReviewComments#receiver-names ","date":"2019-08-26","objectID":"/2019.8.26_receiver-has-generic-name/:0:0","tags":null,"title":"Receiver has generic name","uri":"/2019.8.26_receiver-has-generic-name/"},{"categories":null,"content":"å½“æƒ³è¦åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²ä¸€ä¸ªå¸¸é©»ç¨‹åºæ—¶ï¼Œä¸æƒ³è®©ç¨‹åºéšç€Terminalçš„é€€å‡ºè€Œä¸­æ­¢ï¼Œä½ å¯ä»¥ä½¿ç”¨docker nohup supervisor è¿™äº›å·¥å…·æ¥å®ç°ã€‚ä½†æ˜¯å¤„äºæƒ³å­¦ä¹ Linuxä¸­Systemdçš„ç›®çš„ï¼Œæˆ‘ä½¿ç”¨Systemdæ¥å®ç°æŠŠä¸€ä¸ªGolangç¨‹åºä½œä¸ºä¸€ä¸ªç³»ç»ŸæœåŠ¡ ","date":"2019-07-29","objectID":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/:0:0","tags":null,"title":"Systemdé›†æˆGolangç¨‹åº","uri":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/"},{"categories":null,"content":"æ–°å»ºSystemdçš„Service ç›®å‰go buildå¾—åˆ°çš„å¯æ‰§è¡Œæ–‡ä»¶æ”¾åœ¨/root/glass/goä¸‹ é¦–å…ˆæ–°å»ºServiceï¼Œåç§°å«åšglass-api touch /lib/systemd/system/glass-api.service ä¸‹ä¸€æ­¥ï¼Œç¼–è¾‘è¯¥æ–‡ä»¶ [Unit] Description=Glass admin's api [Service] Type=simple Restart=always RestartSec=5s ExecStart=/root/glass/go/main WorkingDirectory=/root/glass/go/ [Install] WantedBy=multi-user.target ExecStartæ˜¯goå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ WorkingDirectoryè¦æ³¨æ„ï¼Œå¦‚æœç¨‹åºä¸­ä½¿ç”¨äº†ç›¸å¯¹è·¯å¾„æ¥åŠ è½½ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå¦‚æœåœ¨Serviceä¸­æ²¡æœ‰é…ç½®WorkingDirectoryï¼Œé»˜è®¤æ˜¯æ ¹è·¯å¾„ï¼Œæ‰€ä»¥é…ç½®æ–‡ä»¶å°±ä»æ ¹è·¯å¾„æ¥å¯»æ‰¾ï¼Œä¼šé€ æˆä¸€äº›æ„å‘ä¸åˆ°çš„æƒ…å†µ ","date":"2019-07-29","objectID":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/:0:1","tags":null,"title":"Systemdé›†æˆGolangç¨‹åº","uri":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/"},{"categories":null,"content":"è¿è¡ŒService å¯åŠ¨ service glass-api start åœæ­¢ service glass-api stop æŸ¥çœ‹çŠ¶æ€ service glass-api status è¾“å‡ºç»“æœ Redirecting to /bin/systemctl status glass-api.service â— glass-api.service - Glass admin's api Loaded: loaded (/usr/lib/systemd/system/glass-api.service; disabled; vendor preset: disabled) Active: active (running) since Sat 2019-07-27 19:00:09 CST; 1 day 15h ago Main PID: 22559 (main) Memory: 7.3M CGroup: /system.slice/glass-api.service â””â”€22559 /root/glass/go/main å¦‚æœæƒ³è¦å¼€æœºå¯åŠ¨ service glass-api enable ","date":"2019-07-29","objectID":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/:0:2","tags":null,"title":"Systemdé›†æˆGolangç¨‹åº","uri":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/"},{"categories":null,"content":"å‚è€ƒ https://liqiang.io/post/run-golang-binary-with-systemd https://github.com/kardianos/service ","date":"2019-07-29","objectID":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/:0:3","tags":null,"title":"Systemdé›†æˆGolangç¨‹åº","uri":"/2019.7.29_systemd%E9%9B%86%E6%88%90golang%E7%A8%8B%E5%BA%8F/"},{"categories":null,"content":"è·å–æ¯«ç§’æ—¶é—´æˆ³ //ç¬¬ä¸€ç§ time.Now().UnixNano() / int64(time.Millisecond) //ç¬¬äºŒç§ time.Now().UnixNano() / 1e6 ","date":"2019-07-25","objectID":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/:0:1","tags":null,"title":"golang timeåŒ…ç›¸å…³çš„ä¸€äº›é—®é¢˜","uri":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"},{"categories":null,"content":"time.Unix()ç”¨æ³• //å‡½æ•°å®šä¹‰ func Unix(sec int64, nsec int64) Time unixæœ‰ä¸¤ä¸ªå‚æ•° ç¬¬ä¸€ä¸ªå‚æ•°ç§’çº§çš„æ—¶é—´æˆ³ ç¬¬äºŒä¸ªå‚æ•°æ˜¯çº³ç§’ å½“ä½¿ç”¨secæ—¶ï¼ŒæŠŠnsecç½®ä¸º0ï¼Œä½¿ç”¨nsecæ—¶æŠŠsecç½®ä¸º0 //ç§’æ—¶é—´æˆ³-\u003eTime time.Unix(1564063799, 0) //çº³ç§’æ—¶é—´æˆ³-\u003eTime time.Unix(0, 1564063799695197200) //æ¯«ç§’æ—¶é—´æˆ³-\u003eTime time.Unix(0, 1564063799695*int64(time.Millisecond)) ","date":"2019-07-25","objectID":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/:0:2","tags":null,"title":"golang timeåŒ…ç›¸å…³çš„ä¸€äº›é—®é¢˜","uri":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"},{"categories":null,"content":"Time.Format formaté»˜è®¤ä½¿ç”¨çš„æ—¶æœ¬åœ°æ—¶åŒºï¼Œå¦‚æœè¦æŒ‡å®šæ—¶åŒºæ–¹å¼å¦‚ä¸‹ var cstZone = time.FixedZone(\"CST\", 8*3600) // ä¸œå…« time.Now().In(cstZone).Format(\"2006-01-02 15:04:05\") ","date":"2019-07-25","objectID":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/:0:3","tags":null,"title":"golang timeåŒ…ç›¸å…³çš„ä¸€äº›é—®é¢˜","uri":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"},{"categories":null,"content":"Time.Parse time.Parse() åªä¼šåœ¨å‚æ•°é‡Œæœ‰æŒ‡æ˜æ—¶åŒºä¿¡æ¯ã€æ—¶åŒºä¿¡æ¯ä»¥ zone offset å½¢å¼ï¼ˆå¦‚ 2018-01-01 12:11:11 +0800 CSTï¼‰è¡¨ç¤ºã€è¡¨ç¤ºç»“æœä¸æœ¬åœ°æ—¶åŒºç­‰ä»·æ—¶ï¼Œæ‰ä¼šä½¿ç”¨æœ¬åœ°æ—¶åŒºï¼Œå¦åˆ™ä½¿ç”¨è¯»å‡ºçš„æ—¶åŒºã€‚è‹¥å‚æ•°é‡Œæ²¡æœ‰æŒ‡æ˜æ—¶åŒºä¿¡æ¯ï¼Œåˆ™ä½¿ç”¨ UTC æ—¶é—´ã€‚æ‰€ä»¥ä¸€èˆ¬å»ºè®®ä½¿ç”¨time.ParseInLocation() time.ParseInLocation(\"2006-01-02 15:04:05\", \"2018-01-01 12:11:11\",time.Local) ","date":"2019-07-25","objectID":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/:0:4","tags":null,"title":"golang timeåŒ…ç›¸å…³çš„ä¸€äº›é—®é¢˜","uri":"/time%E5%8C%85%E7%9B%B8%E5%85%B3%E7%9A%84%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98/"},{"categories":null,"content":"MySqlç´¢å¼•ä¼˜åŒ– ","date":"2019-03-25","objectID":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/:0:0","tags":null,"title":"MySqlç´¢å¼•ä¼˜åŒ–","uri":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/"},{"categories":null,"content":"è¯­æ³• create table user_info ( id int AUTO_INCREMENT, name varchar(20), age int(3), email varchar(256), PRIMARY KEY (id) ); create index idx_user_nameAgeEmail on user_info (name,age,email); create table t ( a varchar(20), b int(3), c varchar(20) ); create index idx_a_b_c on t (a,b,c); create index \u003cç´¢å¼•åç§°\u003e on \u003cè¡¨å\u003e ï¼ˆ\u003cåˆ—å\u003e,.....ï¼‰ ","date":"2019-03-25","objectID":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/:0:1","tags":null,"title":"MySqlç´¢å¼•ä¼˜åŒ–","uri":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/"},{"categories":null,"content":"ä¸åˆé€‚åˆ›å»ºç´¢å¼•çš„æƒ…å†µ æ›´æ–°å¤šï¼ŒæŸ¥è¯¢å°‘ æ•°æ®é‡å¤åº¦é«˜çš„å­—æ®µï¼š æ¯”å¦‚ä¸€å¼ è¡¨æœ‰ä¸¤ä¸ªå­—æ®µâ€œåâ€å’Œâ€œå§“â€ï¼Œâ€œåâ€å°±åˆé€‚å»ºç«‹ç´¢å¼•ï¼Œâ€œå§“â€ä¸åˆé€‚ ","date":"2019-03-25","objectID":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/:0:2","tags":null,"title":"MySqlç´¢å¼•ä¼˜åŒ–","uri":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/"},{"categories":null,"content":"ç´¢å¼•ä¼˜åŒ– æœ€å·¦å‰ç¼€ ä½¿ç”¨ç´¢å¼•çš„æ—¶å€™è¦ä¸€å®šè¦æ³¨æ„åœ¨åˆ›å»ºç´¢å¼•æ—¶çš„é¡ºåº ","date":"2019-03-25","objectID":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/:0:3","tags":null,"title":"MySqlç´¢å¼•ä¼˜åŒ–","uri":"/2019.3.25_mysql%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96/"},{"categories":null,"content":"é—®é¢˜ ä¹‹å‰æƒ³åç¼–è¯‘jaråŒ…,åœ¨ç½‘ä¸Šäº†æ‰¾äº†ä¸€äº›åç¼–è¯‘çš„å·¥å…·æ„Ÿè§‰éƒ½ä¸å¤ªå¥½ç”¨.å°±æ¥æˆ‘å‘ç°ideaè‡ªå¸¦çš„åç¼–è¯‘æ’ä»¶æŒºå¥½ç”¨,ä½†æ˜¯æ²¡æœ‰GUIåªèƒ½ä½¿ç”¨å‘½ä»¤. ","date":"2019-03-25","objectID":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/:0:1","tags":null,"title":"ä½¿ç”¨ideaè‡ªå¸¦çš„pluginåç¼–è¯‘jar","uri":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/"},{"categories":null,"content":"ä½¿ç”¨ è¿™ä¸ªæ’ä»¶åœ¨\u003cidea_home\u003e/plugins/java-decompiler/lib/java-decompiler.jar.è¿™ä¸ªjarä¸èƒ½ç›´æ¥ç”¨java -jarè¿è¡Œ,è¿™ä¸ªjaræ²¡æœ‰åªèƒ½mainå‡½æ•°,ç›´æ¥java -jarä¼šæŠ¥é”™,ä¸‹é¢æ˜¯ä½¿ç”¨æ–¹æ³• java -cp java-decompiler.jar org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompiler -dgs=true siddhi-core.jar mysrc ","date":"2019-03-25","objectID":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/:0:2","tags":null,"title":"ä½¿ç”¨ideaè‡ªå¸¦çš„pluginåç¼–è¯‘jar","uri":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/"},{"categories":null,"content":"å‚æ•°è¯´æ˜ java-decompiler.jaræ˜¯æ’ä»¶ org.jetbrains.java.decompiler.main.decompiler.ConsoleDecompileræ˜¯ä¸»å‡½æ•°å…¥å£ -dgs=true æ˜¯è¿™ä¸ªä¸»å‡½æ•°çš„å‚æ•°,å…·ä½“çš„å«ä¹‰å’Œå…¶ä»–å‚æ•°å…·ä½“å‚è€ƒ è¯¥æ’ä»¶githubé“¾æ¥ siddhi-core.jaræŒ‡éœ€è¦åç¼–è¯‘çš„jar mysrcæŒ‡å®šåç¼–è¯‘åçš„è¾“å‡ºè·¯å¾„ å‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹åè¾“å‡ºçš„æ˜¯.jaræ–‡ä»¶,è§£å‹ä¹‹åå°±æ˜¯æºç äº† ","date":"2019-03-25","objectID":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/:0:3","tags":null,"title":"ä½¿ç”¨ideaè‡ªå¸¦çš„pluginåç¼–è¯‘jar","uri":"/%E4%BD%BF%E7%94%A8idea%E8%87%AA%E5%B8%A6%E7%9A%84plugin%E5%8F%8D%E7%BC%96%E8%AF%91jar/"},{"categories":null,"content":"â€œé˜¶â€çš„å«ä¹‰ B-æ ‘çš„æ‰€æœ‰ç»“ç‚¹ä¸­æœ€å¤šå¯ä»¥æ‹¥æœ‰çš„å­ç»“ç‚¹çš„ä¸ªæ•°ä¸ºâ€œé˜¶â€ï¼Œç”¨Mè¡¨ç¤ºï¼Œä¸‹å›¾æ˜¯ä¸€ä¸ªä¸‰é˜¶B-æ ‘ ä¸‰é˜¶Bæ ‘ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æœ€å¤šæœ‰ä¸‰ä¸ªï¼Œä¸èƒ½è¶…è¿‡ä¸‰ä¸ª ä¸‹å›¾æ˜¯ä¸€ä¸ªå››é˜¶Bæ ‘ ","date":"2019-03-21","objectID":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/:0:1","tags":null,"title":"B-æ ‘çš„ä¸€äº›æ¦‚å¿µ","uri":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/"},{"categories":null,"content":"Mé˜¶Bæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„ä¸ªæ•° æ¯ä¸ªèŠ‚ç‚¹ä¸­æœ€å¤šæœ‰M-1ä¸ªå…ƒç´  æ¯ä¸ªèŠ‚ç‚¹æœ€å°‘æœ‰[M/2]-1ä¸ªå…ƒç´ é™¤äº†æ ¹èŠ‚ç‚¹ï¼Œ[]è¡¨ç¤ºå‘ä¸Šå–æ•´ æ¯”å¦‚ä¸€ä¸ªäº”é˜¶Bæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹å†…æœ€å°‘æœ‰[5/2]-1=2ä¸ªå…ƒç´ ï¼Œæœ€å¤šæœ‰5-1=4ä¸ªå…ƒç´  ","date":"2019-03-21","objectID":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/:0:2","tags":null,"title":"B-æ ‘çš„ä¸€äº›æ¦‚å¿µ","uri":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/"},{"categories":null,"content":"å½“å…ƒç´ ä¸ªæ•°è¶…è¿‡æœ€å¤§ä¸ªæ•°æ—¶ é€‰å–å…ƒç´ ä¸­ç¬¬[M/2]ä¸ªå…ƒç´ ï¼Œè¿›è¡Œåˆ†è£‚ ä¸€ä¸ªå››é˜¶Bæ ‘ï¼Œæœ€å¤šæœ‰3ä¸ªå…ƒç´ ï¼Œå½“å†æ’å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œå·²ç»4ä¸ªå…ƒç´ äº†ï¼Œè¦é€‰å–ç¬¬[4/2]=2ä¸ªå…ƒç´ è¿›è¡Œåˆ†è£‚ï¼Œåˆ†è§£çš„è¿‡ç¨‹å¦‚ä¸‹ ","date":"2019-03-21","objectID":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/:0:3","tags":null,"title":"B-æ ‘çš„ä¸€äº›æ¦‚å¿µ","uri":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/"},{"categories":null,"content":"å‚è€ƒ B-æ ‘æ’å…¥åˆ é™¤å¯è§†åŒ–ï¼šhttps://www.cs.usfca.edu/~galles/visualization/Algorithms.html ","date":"2019-03-21","objectID":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/:0:4","tags":null,"title":"B-æ ‘çš„ä¸€äº›æ¦‚å¿µ","uri":"/2019.3.21_b-%E6%A0%91%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/"},{"categories":null,"content":"å®‰è£…è¿è¡Œ ","date":"2019-03-18","objectID":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/:0:0","tags":null,"title":"VoltDBå…¥é—¨","uri":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/"},{"categories":null,"content":"ç¯å¢ƒè¦æ±‚ python2.7ä»¥ä¸Šï¼Œä¸æ”¯æŒpython3 java8 ","date":"2019-03-18","objectID":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/:0:1","tags":null,"title":"VoltDBå…¥é—¨","uri":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/"},{"categories":null,"content":"å®‰è£… åˆ°å®˜ç½‘æ³¨å†Œä¸ªè´¦å·æ‰èƒ½æŠŠä¸‹è½½é“¾æ¥å‘åˆ°é‚®ç®±ï¼Œå¾ˆè›‹ç–¼ï¼Œä¸èƒ½ç›´æ¥ä¸‹è½½ è§£å‹ æŠŠvoltdb/bin/åŠ å…¥ç¯å¢ƒå˜é‡ ","date":"2019-03-18","objectID":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/:0:2","tags":null,"title":"VoltDBå…¥é—¨","uri":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/"},{"categories":null,"content":"è¿è¡Œ åˆå§‹åŒ–å·¥ä½œç©ºé—´ voltdb inti åœ¨å½“å‰ç›®å½•ç”Ÿæˆvoltdbrootæ–‡ä»¶å¤¹ï¼Œé‡Œé¢å­˜æ”¾ç€æ•°æ®åº“æ•°æ®ä¹‹ç±»çš„ä¸œè¥¿ï¼Œè¿˜æœ‰å‘½ä»¤è¡Œå¿«ç…§ï¼Œç”¨æ¥æ¢å¤æ•°æ® è¿è¡Œvoltdb voltdb start é€šè¿‡cmdæ“ä½œæ•°æ®åº“ sqlcmd ç”¨è¿‡sqlcmdè¿›å…¥å‘½ä»¤è¡Œ,å’ŒMySQLçš„å‘½ä»¤è¡Œå·®ä¸å¤š å…³é—­ voltadmin shutdown Javaè¿æ¥VoltDB é©±åŠ¨jar \u003c!-- https://mvnrepository.com/artifact/org.voltdb/voltdbclient --\u003e \u003cdependency\u003e \u003cgroupId\u003eorg.voltdb\u003c/groupId\u003e \u003cartifactId\u003evoltdbclient\u003c/artifactId\u003e \u003cversion\u003e8.4.1\u003c/version\u003e \u003c/dependency\u003e ä¼ ç»Ÿçš„jdbcæ–¹å¼è¿æ¥VoltDB String driver = \"org.voltdb.jdbc.Driver\"; String url = \"jdbc:voltdb://host:port?jdbc.committhrowexception=false\u0026jdbc.rollbackthrowexception=false\u0026autoreconnect=true\"; Class.forName(driver); this.connection = DriverManager.getConnection(url); å› ä¸ºvoltdbä¸æ”¯æŒä¼ ç»Ÿçš„äº‹åŠ¡æ–¹å¼ï¼Œæ‰€ä»¥åœ¨jdbcæ·»åŠ ä¸¤ä¸ªå‚æ•°ä½¿åœ¨ä½¿ç”¨äº‹åŠ¡æ—¶ä¸æŠ¥å¼‚å¸¸ ä½¿ç”¨clientæ¥è¿æ¥VoltDB ClientConfig config = new ClientConfig(); this.client = ClientFactory.createClient(config); client.createConnection(\"192.168.1.241\"); å¦‚æœä½¿ç”¨è¿™ç§æ–¹å¼æ¥æ“ä½œæ•°æ®åº“ï¼Œæ‰€æœ‰çš„æ“ä½œåªèƒ½é€šè¿‡å­˜å‚¨è¿‡ç¨‹æ¥å®ç° ç®€å•æ€§èƒ½æµ‹è¯• å¯åŠ¨æ—¶å ç”¨550Må·¦å³çš„å†…å­˜ æ¯ç§’45æ¬¡æ’å…¥æ—¶,CPUå ç”¨å¤§æ¦‚20% æ¯ç§’3900æ¬¡æ’å…¥æ—¶,CPUæ»¡è½½,æ²¡æœ‰æ•°æ®ä¸¢å¤± å¯¹100Wå•è¡¨çš„ä¸€ä¸ªå­—æ®µè¿›è¡ŒlikeæŸ¥è¯¢,è€—æ—¶0.2S ä¸‰ç™¾ä¸‡æ¡ä¸‹å›¾ç±»ä¼¼çš„æ•°æ®ï¼ŒåŠ ä¸Švoltdbæœ¬èº«çš„è¿›ç¨‹å¤§æ¦‚å ç”¨1.22Gå†…å­˜ å…¶ä»– voltdbæ˜¯å†…å­˜å…³ç³»æ•°æ®åº“,æ‰€ä»¥æŸ¥è¯¢æ¯”redisæ–¹ä¾¿ ä¸æ”¯æŒbeganTransaction autoCommitä¹‹ç±»çš„æ“ä½œ,è¦æƒ³è¿›è¡Œäº‹åŠ¡ç›¸å…³çš„æ“ä½œ,åªèƒ½ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ ä¸æ”¯æŒå¤–é”®,è‡ªå¢å­—æ®µä¹‹ç±»çš„ sqlcmdå¯ä»¥æ‰§è¡Œsqlè„šæœ¬ sqlcmd \u003c test.sql å‚è€ƒ https://docs.voltdb.com/UsingVoltDB/ddlref_createtable.php https://docs.voltdb.com/ ","date":"2019-03-18","objectID":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/:0:3","tags":null,"title":"VoltDBå…¥é—¨","uri":"/2019.3.18_voltdb%E5%85%A5%E9%97%A8/"},{"categories":null,"content":"æ­¥éª¤ è®¾ç½®mysqlå…å¯†ç ç™»é™† ç¼–è¾‘/etc/mysql/my.cnfæ–‡ä»¶,åœ¨æœ€ååŠ å…¥ä»¥ä¸‹è®¾ç½® [mysqld] skip-grant-tables=1 é‡å¯mysql $ sudo service mysql stop $ sudo service mysql strat è¿›å…¥mysqlï¼Œå…ˆä¿®æ”¹éªŒè¯æ–¹å¼ï¼Œå†æ”¹å¯†ç  $ mysql //ä¿®æ”¹éªŒè¯æ–¹å¼ mysql\u003e USE mysql; mysql\u003e UPDATE user SET plugin='mysql_native_password' WHERE User='root'; //ä¿®æ”¹å¯†ç  mysql\u003e update mysql.user set authentication_string=password('123qwe') where user='root' and Host = 'localhost'; //åˆ·æ–°æƒé™ mysql\u003e flush privileges; //æ¨å‡º musql\u003e exit; é‡å¯mysqlæœåŠ¡ ç™»é™†mysql $ mysql -uroot -p å‚è€ƒ https://stackoverflow.com/questions/39281594/error-1698-28000-access-denied-for-user-rootlocalhost# ","date":"2019-03-16","objectID":"/2019.3.16_ubuntu18.04-%E4%BF%AE%E6%94%B9mysql5.7%E9%BB%98%E8%AE%A4root%E5%AF%86%E7%A0%81/:0:0","tags":null,"title":"Ubuntu18.04 ä¿®æ”¹Mysql5.7é»˜è®¤rootå¯†ç ","uri":"/2019.3.16_ubuntu18.04-%E4%BF%AE%E6%94%B9mysql5.7%E9%BB%98%E8%AE%A4root%E5%AF%86%E7%A0%81/"},{"categories":null,"content":"å®‰è£… ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:0","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å¼€å¯WSLç»„ä»¶ Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:1","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"ä¸‹è½½é•œåƒ ç”±äºæˆ‘çš„Win10æ˜¯ç²¾ç®€ç‰ˆæ‰€ä»¥æ²¡ç”¨åº”ç”¨å•†åº—æ‰€ä»¥åªèƒ½æ‰‹åŠ¨ä¸‹è½½é•œåƒ å„ä¸ªå‘è¡Œç‰ˆ https://docs.microsoft.com/en-us/windows/wsl/install-manua ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:2","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å®‰è£… æŠŠUbuntu.appxé‡å‘½åä¸ºUbuntu.zip è§£å‹ å¯¹Ubuntu.exeå³é”®ä»¥ç®¡ç†å‘˜è¿è¡Œï¼Œè¾“å…¥ç”¨æˆ·åå’Œå¯†ç å³å®‰è£…å®Œæˆ ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:3","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"ä¿®æ”¹é»˜è®¤ç”¨æˆ· åœ¨è§£å‹çš„æ ¹ç›®å½•æ‰“å¼€powershell ubuntu config --default-user \u003cusername\u003e å¤‡ä»½WSL ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:4","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å®‰è£…LxRunOffline https://github.com/DDoSolitary/LxRunOffline å®‰è£…å¥½åæœ€å¥½é‡å¯ä¸‹ç”µè„‘ï¼Œå¦‚æœä¸é‡å¯å¯èƒ½æœ‰é—®é¢˜ ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:5","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å¸¸ç”¨LxRunOfflineå‘½ä»¤ //å·²ç»å®‰è£…çš„wsl LxRunOffline.exe list //å®‰è£…wsl LxRunOffline.exe install //å¤‡ä»½wsl LxRunOffline.exe export //å¯åŠ¨ä¸€ä¸ªwsl LxRunOffline.exe run ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:6","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å¤‡ä»½wsl å…ˆæŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­å­˜åœ¨çš„wsl \u003e LxRunOffline.exe list Ubuntu-18.04 å¼€å§‹å¤‡ä»½ LxRunOffline.exe export -n Ubuntu-18.04 -f backup.tar.gz -n ï¼šwslçš„åˆ«åï¼Œå°±æ˜¯ä¹‹å‰ç”¨listæŸ¥çœ‹çš„å…¶ä¸­ä¸€ä¸ª -f ï¼šå¤‡ä»½çš„è·¯å¾„ï¼Œæˆ‘è¿™ç›´æ¥å¤‡ä»½åˆ°å½“å‰è·¯å¾„backup.tar.gz è¿˜åŸwsl LxRunOffline.exe install -n new-linux -d .\\ -f D:\\temp\\backup.tar.gz -n ï¼šèµ·ä¸ªåå­— -d ï¼šwslå®‰è£…ç›®å½• -f ï¼šå¤‡ä»½æ–‡ä»¶ç›®å½• å¯åŠ¨å¤‡ä»½çš„wsl LxRunOffline.exe run -n new-linux å‚è€ƒ https://github.com/DDoSolitary/LxRunOffline https://docs.microsoft.com/en-us/windows/wsl/install-on-server https://askubuntu.com/questions/816732/how-to-change-default-user-in-wsl-ubuntu-bash-on-windows-10 ","date":"2019-03-16","objectID":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/:0:7","tags":null,"title":"WSLå®‰è£…å’Œä½¿ç”¨LxRunOfflineå¤‡ä»½","uri":"/2019.3.16_wsl%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8lxrunoffline%E5%A4%87%E4%BB%BD/"},{"categories":null,"content":"å››ä¸ªäº‹ç‰©ç­‰çº§ read uncommitted ï¼šæœ‰å¯èƒ½è„è¯» ä¸€ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­è¯»å–åˆ°äº†ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡çš„ä¸­é€”æ•°æ® read committed ï¼šæœ‰å¯èƒ½ä¸å¯é‡å¤è¯» å³åœ¨ä¸€æ¬¡äº‹åŠ¡ä¹‹é—´ï¼Œè¿›è¡Œäº†ä¸¤æ¬¡è¯»å–ï¼Œä½†æ˜¯ç»“æœä¸ä¸€æ ·ï¼Œå¯èƒ½ç¬¬ä¸€æ¬¡idä¸º1çš„äººå«â€œæä¸‰â€ï¼Œç¬¬äºŒæ¬¡è¯»idä¸º1çš„äººå°±å«äº†â€œæå››â€ã€‚å› ä¸ºè¯»å–æ“ä½œä¸ä¼šé˜»æ­¢å…¶ä»–äº‹åŠ¡ repetable read ï¼šæœ‰å¯èƒ½å¹»è¯» å¹»è¯»ä¾§é‡çš„æ–¹é¢æ˜¯æŸä¸€æ¬¡çš„ select æ“ä½œå¾—åˆ°çš„ç»“æœæ‰€è¡¨å¾çš„æ•°æ®çŠ¶æ€æ— æ³•æ”¯æ’‘åç»­çš„ä¸šåŠ¡æ“ä½œã€‚æ›´ä¸ºå…·ä½“ä¸€äº›ï¼šselect æŸè®°å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨ï¼Œå‡†å¤‡æ’å…¥æ­¤è®°å½•ï¼Œä½†æ‰§è¡Œ insert æ—¶å‘ç°æ­¤è®°å½•å·²å­˜åœ¨ï¼Œæ— æ³•æ’å…¥ï¼Œæ­¤æ—¶å°±å‘ç”Ÿäº†å¹»è¯» serializable ï¼šæ•ˆç‡æœ€ä½ å¯é¿å…å¹»è¯»ã€‚è¯»åŠ å…±äº«é”ï¼Œå†™åŠ æ’ä»–é”ã€‚è¿™æ ·è¯»å–äº‹åŠ¡å¯ä»¥å¹¶å‘ï¼Œä½†æ˜¯è¯»å†™ï¼Œå†™å†™äº‹åŠ¡ä¹‹é—´éƒ½æ˜¯äº’æ–¥çš„ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªä¸ªæ‰§è¡Œäº‹åŠ¡ï¼Œæ‰€ä»¥å«åºåˆ—åŒ– ","date":"0001-01-01","objectID":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/:0:1","tags":null,"title":"MySqläº‹åŠ¡ç­‰çº§å’Œå¹»è¯»","uri":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/"},{"categories":null,"content":"æŸ¥çœ‹å½“å‰äº‹åŠ¡ç­‰çº§ SELECT @@global.tx_isolation, @@tx_isolation; ","date":"0001-01-01","objectID":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/:0:2","tags":null,"title":"MySqläº‹åŠ¡ç­‰çº§å’Œå¹»è¯»","uri":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/"},{"categories":null,"content":"è§¦å‘å¹»è¯» äº‹å‰å‡†å¤‡ create table t1 ( id int(10), age int(3), primary key(id) ) è§¦å‘è¿‡ç¨‹ äº‹åŠ¡1 äº‹åŠ¡2 æ­¥éª¤ begin 1 select * from t1 where id =1 2 insert into t1 values (1,12) 3 insert into t1 values(1,12) 4 â€‹ åœ¨äº‹åŠ¡1ä¸­ï¼Œå…ˆæŸ¥è¯¢æœ‰æ²¡æœ‰id = 1çš„è®°å½•ï¼Œå¦‚æœæ²¡æœ‰å°±æ’å…¥ï¼Œä½†æ˜¯åœ¨æŸ¥è¯¢åï¼Œäº‹åŠ¡2å…ˆæ’å…¥äº†ï¼Œé‚£ä¹ˆäº‹åŠ¡1å°±å‡ºç°é”™è¯¯ ","date":"0001-01-01","objectID":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/:0:3","tags":null,"title":"MySqläº‹åŠ¡ç­‰çº§å’Œå¹»è¯»","uri":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/"},{"categories":null,"content":"è§£å†³å¹»è¯» äº‹åŠ¡1 äº‹åŠ¡2 æ­¥éª¤ begin 1 select * from t1 where id =1 for update 2 insert into t1 values (1,12) 3 insert into t1 values(1,12) 4 commit 5 åœ¨Step2æ‰§è¡Œåï¼Œæ•°æ®åº“ä¼šåŠ ä¸€ä¸ªXé”(æ’å®ƒé”)ã€‚è¿™æ—¶Step3æ‰§è¡Œåï¼Œä¼šä¸€ç›´ç­‰å¾…äº‹åŠ¡1æ‰§è¡Œå®Œæ¯•ï¼Œå½“äº‹åŠ¡1 commitåï¼Œäº‹åŠ¡2å°±æŠ¥é”™äº† ","date":"0001-01-01","objectID":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/:0:4","tags":null,"title":"MySqläº‹åŠ¡ç­‰çº§å’Œå¹»è¯»","uri":"/2019.3.26_mysql%E4%BA%8B%E5%8A%A1%E7%AD%89%E7%BA%A7%E5%92%8C%E5%B9%BB%E8%AF%BB/"},{"categories":null,"content":"å…³äºé¡µé¢","date":"0001-01-01","objectID":"/about/","tags":null,"title":"å…³äº","uri":"/about/"},{"categories":null,"content":"æ‰‹åŠ¨é˜€ ","date":"0001-01-01","objectID":"/about/:0:0","tags":null,"title":"å…³äº","uri":"/about/"},{"categories":null,"content":"å½’æ¡£","date":"0001-01-01","objectID":"/archives/","tags":null,"title":"å½’æ¡£","uri":"/archives/"}]